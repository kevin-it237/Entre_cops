{"version":3,"sources":["ui/components/Services/ServicesItem.js","ui/components/Services/Services.js","ui/components/Events/EventItem.js","ui/components/Events/Events.js","ui/components/Categories/SingleCategoryPage.js"],"names":["ServiceItem","props","offre","service","length","slice","react_default","a","createElement","href","_id","className","coupons","nCoupons","src","rootUrl","image","alt","category","title","Services","state","loading","services","error","_this2","this","isHomePage","axios","get","then","res","setState","data","catch","err","isCategoryPage","isFilterPage","prevProps","_this$state","Hoc","Filter","eventType","Loader","map","id","key","ServicesItem","showMore","Component","EventItem","description","event","Events","events","Events_EventItem","Home","loadingServices","loadingEvents","getEventsByCategory","_this","match","params","split","join","window","location","pathname","getServicesByCategory","isAllAnoucesPage","react__WEBPACK_IMPORTED_MODULE_5___default","_globalComponent_Hoc__WEBPACK_IMPORTED_MODULE_7__","_globalComponent_Header__WEBPACK_IMPORTED_MODULE_6__","_Categories__WEBPACK_IMPORTED_MODULE_8__","selected","AnounceType","_globalComponent_Loader__WEBPACK_IMPORTED_MODULE_12__","_Events_Events__WEBPACK_IMPORTED_MODULE_9__","_Services_Services__WEBPACK_IMPORTED_MODULE_10__"],"mappings":"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","file":"static/js/31.55850350.chunk.js","sourcesContent":["import React from 'react';\r\nimport {rootUrl} from '../../../configs/config';\r\n\r\nconst ServiceItem = (props) => {\r\n    const offre = props.service.offre.length <= 90 ? props.service.offre:\r\n        props.service.offre.slice(0, 88) + '...';\r\n    return (\r\n        <a href={\"/annonce/service/\"+props.service._id} className=\"mt-5\">\r\n            <div className=\"card\">\r\n                <div className=\"box\">\r\n                    {props.service.coupons && props.service.coupons.nCoupons > 0 ? <h2 className=\"badge badge-warning custom-badge\">Coupons</h2> : <h2 className=\"badge badge-dark custom-badge\">Pas de coupons</h2>}\r\n                    <div className=\"img\">\r\n                        <img src={rootUrl+'/'+props.service.image} alt=\"Service\" />\r\n                    </div>\r\n                    <div className=\"text-content\">\r\n                        <h2>{props.service.category}<br/>\r\n                        <span>{props.service.title}</span></h2>\r\n                        <p>{offre}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </a>\r\n    );\r\n}\r\n\r\nexport default ServiceItem;","import React, { Component } from 'react';\r\nimport ServiceItem from './ServicesItem';\r\nimport Loader from '../../globalComponent/Loader';\r\nimport axios from 'axios';\r\nimport './Services.scss';\r\nimport Filter from '../Filter/Filter'\r\nimport Hoc from '../../globalComponent/Hoc'\r\n\r\nclass Services extends Component {\r\n\r\n    state = {\r\n        loading: true,\r\n        services: [],\r\n        error: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.isHomePage) {\r\n            axios.get('/api/service/4')\r\n            .then(res => {\r\n                this.setState({ loading: false, services: res.data.services, error: '' })\r\n            })\r\n            .catch(err => {\r\n                this.setState({ loading: false, error: 'Une erreur s\\'est produite. Veuillez recharger la page' })\r\n            })\r\n        } else if (this.props.isCategoryPage) {\r\n            this.setState({ services: this.props.services, loading: false, error: '' })\r\n        } else if (this.props.isFilterPage) {\r\n            this.setState({ services: this.props.services, loading: false, error: '' })\r\n        } else {\r\n            axios.get('/api/service/validated/all')\r\n            .then(res => {\r\n                this.setState({ loading: false, services: res.data.services, error: '' })\r\n            })\r\n            .catch(err => {\r\n                this.setState({ loading: false, error: 'Une erreur s\\'est produite. Veuillez recharger la page' })\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if(this.props.services !== prevProps.services) {\r\n            if (this.props.isCategoryPage || this.props.isFilterPage) {\r\n                this.setState({services: this.props.services, loading: false, error: ''})\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {error, services, loading} = this.state;\r\n        return (\r\n            <Hoc>\r\n                {!this.props.isHomePage&&<Filter />}\r\n                <section className={this.props.isHomePage ? \"services bg-white pb-5\" : \"services pb-5\"}>\r\n                    <div className=\"container pt-3 pb-5\">\r\n                        <div className=\"row pt-5\">\r\n                            <div className=\"col\">\r\n                                <h1 className={this.props.isHomePage ? \"pt-4 pb-4 service-header text-center\" : \"pt-4 pb-4 service-header text-left\"}>\r\n                                    {this.props.eventType}\r\n                                </h1>\r\n                            </div>\r\n                        </div>\r\n                        <div className={loading || error.length || this.props.isHomePage? \"row pb-5 mb-2 justify-content-center\":\"row pb-5 mb-2\"}>\r\n                            {error.length ? <div className=\"alert alert-danger\">{error}</div>:null}\r\n                            {\r\n                                loading ? <div className=\"d-block ml-auto mr-auto justify-content-center\"><Loader/></div>:\r\n                                    services&&services.length ?\r\n                                    services.map((service, id) => (\r\n                                            <div key={id} className=\"col-sm-12 col-md-6 col-lg-3 mt-3\">\r\n                                                <ServiceItem service={service} />\r\n                                            </div>\r\n                                        )): null\r\n                            }\r\n                            {!loading&&services.length === 0 &&!error.length ? <div className=\"d-block ml-auto mr-auto justify-content-center\"><h5>Aucun Service</h5></div>:null}\r\n                        </div>\r\n                            {\r\n                            this.props.isHomePage&&services.length !==0 ?\r\n                                <div className=\"row\">\r\n                                    <div className=\"col text-center see-more\">\r\n                                        <a href=\"/services\" className=\"btn btn-danger\">Voir plus</a>\r\n                                    </div>\r\n                                </div>: null\r\n                            }\r\n                            {\r\n                            this.props.showMore&&services.length !==0 ?\r\n                                <div className=\"row pb-5\">\r\n                                    <div className=\"col text-center see-more\">\r\n                                        <a className=\"btn btn-danger\" href={\"/services/category/\"+ this.props.category}>Voir plus</a>\r\n                                    </div>\r\n                                </div>: null\r\n                            }\r\n                    </div>\r\n                </section>\r\n            </Hoc>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Services;","import React from 'react';\r\nimport {rootUrl} from '../../../configs/config';\r\n\r\nconst EventItem = (props) => {\r\n    const textLength = props.event.description.length;\r\n    const description = textLength <= 95 ? props.event.description:\r\n        props.event.description.slice(0, 93) + '...';\r\n    return (\r\n        <a href={\"/annonce/event/\" + props.event._id} className=\"home mt-4\">\r\n            {props.event.coupons && props.event.coupons.nCoupons > 0 ? <h2 className=\"badge badge-warning custom-badge\">Coupons</h2> : <h2 className=\"badge badge-dark custom-badge\">Pas de coupons</h2>}\r\n            <img src={rootUrl+'/'+props.event.image} alt=\"\" className=\"home__img\"/>\r\n            <h5 className=\"home_name\">{props.event.title}</h5>\r\n            <div className=\"home_content\">\r\n                <center>\r\n                    <p>{description}</p>\r\n                </center>\r\n            </div>\r\n            <button className=\"btn home__btn\">Consulter</button>\r\n        </a>\r\n    );\r\n}\r\n\r\nexport default EventItem;","import React, { Component } from 'react';\r\nimport EventItem from './EventItem';\r\nimport Loader from '../../globalComponent/Loader';\r\nimport axios from 'axios';\r\nimport './Events.scss';\r\nimport Filter from '../Filter/Filter';\r\nimport Hoc from '../../globalComponent/Hoc'\r\nclass Events extends Component {\r\n\r\n    state = {\r\n        loading: true,\r\n        events: [],\r\n        error: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.props.isHomePage) {\r\n            axios.get(\"/api/event/4\")\r\n            .then(res => {\r\n                this.setState({ loading: false, events: res.data.events, error: '' })\r\n            })\r\n            .catch(err => {\r\n                this.setState({ loading: false, error: 'Une erreur s\\'est produite. Veuillez recharger la page' })\r\n            })\r\n        } else if(this.props.isCategoryPage) {\r\n            this.setState({ events: this.props.events, loading: false, error: '' })\r\n        } else if (this.props.isFilterPage) {\r\n            this.setState({ events: this.props.events, loading: false, error: '' })\r\n        } else {\r\n            axios.get(\"/api/event/validated/all\")\r\n            .then(res => {\r\n                this.setState({ loading: false, events: res.data.events, error: '' })\r\n            })\r\n            .catch(err => {\r\n                this.setState({ loading: false, error: 'Une erreur s\\'est produite. Veuillez recharger la page' })\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if(this.props.events !== prevProps.events) {\r\n            if (this.props.isCategoryPage || this.props.isFilterPage) {\r\n                this.setState({events: this.props.events, loading: false, error: ''})\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {error, events, loading} = this.state;\r\n        return (\r\n            <Hoc>\r\n                {!this.props.isHomePage&&<Filter />}\r\n                <section className={this.props.isHomePage ? \"events pt-5\":\"events pt-5 bgWhite\"} id=\"events\">\r\n                    <div className=\"container pb-5\">\r\n                        <div className=\"row pt-5\">\r\n                            <div className=\"col-sm-12\">\r\n                                <h3 className={this.props.isHomePage ? \"event-header text-center\" : \"pt-4 pb-1 event-header text-left\"}>\r\n                                    {this.props.eventType}\r\n                                </h3>\r\n                            </div>\r\n                        </div>\r\n                        <div className={loading || error.length || this.props.isHomePage? \"row pb-5 mb-2 justify-content-center\":\"row pb-5 mb-3 px-2\"}>\r\n                            {error&&error.length ? <div className=\"alert alert-danger\">{error}</div>:null}\r\n                            {\r\n                                loading ? <div className=\"d-block ml-auto mr-auto justify-content-center\"><Loader/></div>:\r\n                                    events&&events.length ?\r\n                                        events.map((event, id) => (\r\n                                            <div key={id} className=\"col-sm-12 col-md-6 col-lg-3 mt-3\">\r\n                                                <EventItem event={event} />\r\n                                            </div>\r\n                                        )): null\r\n                            }\r\n                            {!loading&&events.length === 0 &&!error.length ? <div className=\"d-block ml-auto mr-auto justify-content-center\"><h5>Aucune Actualité</h5></div>:null}\r\n                        </div>\r\n                        {\r\n                            this.props.isHomePage&&events.length !==0 ?\r\n                            <div className=\"row pb-5\">\r\n                                <div className=\"col text-center see-more\">\r\n                                    <a className=\"btn btn-danger\" href=\"/events\">Voir plus</a>\r\n                                </div>\r\n                            </div> : null\r\n                        }\r\n                        {\r\n                            this.props.showMore&&events.length !==0 ?\r\n                            <div className=\"row pb-5\">\r\n                                <div className=\"col text-center see-more\">\r\n                                    <a className=\"btn btn-danger\" href={\"/events/category/\"+this.props.category}>Voir plus</a>\r\n                                </div>\r\n                            </div> : null\r\n                        }\r\n                    </div>\r\n                </section> \r\n            </Hoc>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Events;","import React, { Component } from 'react';\r\nimport Header from '../../globalComponent/Header';\r\nimport Hoc from '../../globalComponent/Hoc';\r\nimport Categories from './Categories';\r\nimport Events from '../Events/Events';\r\nimport Services from '../Services/Services';\r\nimport axios from 'axios';\r\nimport Loader from '../../globalComponent/Loader';\r\nimport './Categories.scss';\r\n\r\nclass Home extends Component {\r\n\r\n    state = {\r\n        loadingServices: true,\r\n        loadingEvents: true,\r\n        services: [],\r\n        events: [],\r\n        error: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getEventsByCategory();\r\n        this.getServicesByCategory();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if(this.props !== prevProps) {\r\n            this.getEventsByCategory();\r\n            this.getServicesByCategory();\r\n        }\r\n    }\r\n\r\n    getEventsByCategory = () => {\r\n        this.setState({ loadingEvents: true});\r\n        const category = this.props.match.params.id.split(\"-\").join(\" \");\r\n        // Fetch events/services\r\n        axios.get('/api/event/category/' + category)\r\n        .then(res => {\r\n            let data = res.data.events;\r\n            if (window.location.pathname.split('/')[1] !== \"events\") {\r\n                data = data.slice(0, 8);\r\n            }\r\n            this.setState({events: data, error: '', loadingEvents: false});\r\n        })\r\n        .catch(err => {\r\n            this.setState({ error: 'Une érreur s\\'est produite. Veuillez recharger.', loadingEvents: false});\r\n        })\r\n    }\r\n\r\n    getServicesByCategory = () => {\r\n        this.setState({ loadingServices: true});\r\n        const category = this.props.match.params.id.split(\"-\").join(\" \");\r\n        // Fetch services/services\r\n        axios.get('/api/service/category/' + category)\r\n        .then(res => {\r\n            let data = res.data.services;\r\n            if (window.location.pathname.split('/')[1] !== \"services\") {\r\n                data = data.slice(0, 8);\r\n            }\r\n            this.setState({services: data, error: '', loadingServices: false});\r\n        })\r\n        .catch(err => {\r\n            this.setState({ error: 'Une érreur s\\'est produite. Veuillez recharger.', loadingServices: false});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {events, services, loadingEvents, loadingServices} = this.state;\r\n        const category = this.props.match.params.id.split(\"-\").join(\" \");\r\n        const isAllAnoucesPage = window.location.pathname.split('/')[1] === \"category\";\r\n        return (\r\n            <Hoc>\r\n                <Header />\r\n                <Categories selected={category} />\r\n                {\r\n                    this.props.match.params.AnounceType === \"events\" || isAllAnoucesPage ?\r\n                        loadingEvents ? <div className=\"d-flex justify-content-center py-5\"><Loader /></div> :\r\n                        <Events showMore={isAllAnoucesPage} category={category}  events={events} isCategoryPage={true} eventType=\"Evènements\" isHomePage={false} /> : null\r\n                }\r\n                {\r\n                    this.props.match.params.AnounceType === \"services\" || isAllAnoucesPage ?\r\n                        loadingServices ? <div className=\"d-flex justify-content-center py-5\"><Loader /></div> :\r\n                        <Services showMore={isAllAnoucesPage} category={category} services={services} isCategoryPage={true} eventType=\"Services\" isHomePage={false} /> : null\r\n                }\r\n            </Hoc>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;"],"sourceRoot":""}