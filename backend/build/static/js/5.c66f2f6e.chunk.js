(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{102:function(e,a,t){var n;!function(){"use strict";var t={}.hasOwnProperty;function r(){for(var e=[],a=0;a<arguments.length;a++){var n=arguments[a];if(n){var l=typeof n;if("string"===l||"number"===l)e.push(n);else if(Array.isArray(n)&&n.length){var c=r.apply(null,n);c&&e.push(c)}else if("object"===l)for(var s in n)t.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(a,[]))||(e.exports=n)}()},103:function(e,a,t){"use strict";a.a=function(e){return e.children}},105:function(e,a,t){"use strict";var n=t(0),r=t.n(n);a.a=function(e){return r.a.createElement("div",{className:"spinner-border",role:"status",style:{color:e.color}},r.a.createElement("span",{className:"sr-only"},"Loading..."))}},108:function(e,a,t){e.exports=t.p+"static/media/logo.919201fe.png"},114:function(e,a,t){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(a,"a",function(){return n})},116:function(e,a,t){"use strict";var n=t(15),r=t(16),l=t(19),c=t(17),s=t(18),o=t(0),i=t.n(o),m=t(24),u=t(109),d=t(20),p=t(30),g=t(110),h=(t(121),t(108)),f=t.n(h),v=t(124),E=t.n(v),N=t(114),b=(t(119),function(e){function a(){return Object(n.a)(this,a),Object(l.a)(this,Object(c.a)(a).apply(this,arguments))}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=Object(N.a)(this.props.recommandations.reverse());return e.reverse(),i.a.createElement("div",{className:"recommandations d-flex flex-column"},e.slice(0,5).map(function(e,a){return i.a.createElement("div",{key:a,className:e.visited?"rec-item":"notvisited rec-item"},i.a.createElement("a",{href:e.link},i.a.createElement("h4",null,e.title),i.a.createElement("div",{className:"d-flex"},i.a.createElement("div",{className:"d-flex flex-row align-items-center"},i.a.createElement(u.a,{icon:g.l,size:"1x"}),i.a.createElement("h6",{className:"ml-2 mb-0"},"Par ",e.name)))))}))}}]),a}(o.Component)),y=t(29),w=(t(122),t(9)),k=t.n(w),x=t(105),S=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(s)))).state={searching:!1,results:[],error:""},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){var a=this;if(e.query!==this.props.query)if(this.props.query&&this.props.query.trim().length>0){var t=this.props.query;this.setState({searching:!0,results:[]}),k.a.get("/api/event/"+t+"/search").then(function(e){var n=[];e.data.events.forEach(function(e){e.eventType="event",a.state.results.includes(e)||n.push(e)}),k.a.get("/api/service/"+t+"/search").then(function(e){var t=[];e.data.services.forEach(function(e){e.eventType="service",a.state.results.includes(e)||t.push(e)}),a.setState({results:[].concat(n,t),searching:!1})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})})}else this.setState({searching:!1})}},{key:"render",value:function(){return i.a.createElement("div",{className:"searchResult-list ".concat(this.props.className)},this.state.error.length?i.a.createElement("div",{className:"alert alert-danger text-center"},this.state.error):null,this.state.searching?i.a.createElement("div",{className:"d-flex justify-content-center p-3"},i.a.createElement(x.a,null)):this.state.results.length?this.state.results.slice(0,10).map(function(e,a){return i.a.createElement(j,{key:a,result:e})}):i.a.createElement("div",{className:"d-flex justify-content-center p-3"},i.a.createElement("span",null,"Aucun r\xe9sultat")))}}]),a}(o.PureComponent),j=function(e){return i.a.createElement("a",{href:"/annonce/"+e.result.eventType+"/"+e.result._id,className:"d-flex searchResult-item"},i.a.createElement("img",{src:y.a+"/"+e.result.image,alt:"",className:"mr-3"}),i.a.createElement("div",{className:"d-flex flex-column "},i.a.createElement("h3",null,e.result.title),i.a.createElement("span",{className:"text-muted"},e.result.category)))},O=t(103),C=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(s)))).state={user:null,name:"",token:null,role:"",accountValidated:null,redirect:!1,query:""},t.logout=function(){t.props.onLogout()},t.handleInputChange=function(e){var a=e.target.value;t.setState({query:a})},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=JSON.parse(localStorage.getItem("authData"));if(a&&a.user){this.setState({user:a.user,name:a.user.name,token:a.token,role:a.user.role,accountValidated:a.user.accountValidated});var t=E()(y.a);t.on("display notification",function(a){var t=JSON.parse(localStorage.getItem("authData"));t&&t.user&&t.user._id===a.to&&e.props.onAutoSign()}),t.on("display anounce notification",function(a){var t=JSON.parse(localStorage.getItem("authData"));t&&t.user&&e.props.onAutoSign()})}}},{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&this.setState({user:this.props.user,name:this.props.name,token:this.props.token,role:this.props.role,accountValidated:this.props.accountValidated})}},{key:"render",value:function(){var e=this,a=this.state,t=a.name,n=a.token,r=a.role,l=a.accountValidated,c=a.user,s=0;c&&c.recommandations&&c.recommandations.length&&(s=c.recommandations.filter(function(e){return!1===e.visited}).length);return i.a.createElement(O.a,null,i.a.createElement("nav",{className:(this.props.home,"navbar navbar-expand-lg navbar-light bg-light navbar-shadow")},i.a.createElement("div",{className:"container"},i.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("div",{className:"search-wrapper"},i.a.createElement("form",{className:"form-inline d-lg-none my-2 my-lg-0 navbar-brand form-mobile"},i.a.createElement("input",{onChange:function(a){return e.handleInputChange(a)},className:"form-control mr-sm-2",type:"text",placeholder:"Rechercher...","aria-label":"Rechercher..."}),i.a.createElement(u.a,{icon:g.j,size:"2x"})),this.state.query.trim().length>0?i.a.createElement(S,{query:this.state.query,className:"d-lg-none"}):null),n?i.a.createElement("div",{className:"dropdown-mobile mt-2"},i.a.createElement("a",{href:"/recommandations",className:"",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},i.a.createElement(u.a,{icon:g.b,size:"1x"}),i.a.createElement("sup",{className:"ml-1"},c.recommandations&&c.recommandations.length?c.recommandations.length:0)),c.recommandations&&c.recommandations.length?i.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},i.a.createElement(b,{recommandations:c.recommandations.reverse()}),i.a.createElement("div",{className:"notifications-link py-2"},i.a.createElement("a",{id:"notifications-link",className:"notifications-link pt-3 text-center",href:"/user/notifications"},"Voir toutes les notifications"))):null):null,i.a.createElement(m.b,{className:"navbar-brand",to:"/"},i.a.createElement("img",{src:f.a,width:"110",height:"100%",alt:"Logo"})),i.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03"},i.a.createElement("div",{className:"ml-auto search-wrapper"},i.a.createElement("form",{className:"form-inline d-none d-lg-block my-2 my-lg-0 ml-auto mr-4 form-desktop"},i.a.createElement("input",{onChange:function(a){return e.handleInputChange(a)},className:"form-control mr-sm-2",type:"text",placeholder:"Rechercher...","aria-label":"Rechercher..."}),i.a.createElement(u.a,{icon:g.j,size:"2x"})),this.state.query.trim().length>0?i.a.createElement(S,{query:this.state.query,className:"d-none d-lg-block"}):null),i.a.createElement("ul",{className:"navbar-nav  mt-2 mt-lg-0"},n&&"admin"===r?i.a.createElement("li",{className:"nav-item"},i.a.createElement(m.c,{className:"nav-link",to:"/admin/home"},"Admin Dashboard")):null,n&&"supplier"===r&&l?i.a.createElement("li",{className:"nav-item"},i.a.createElement(m.c,{className:"nav-link",to:"/dashboard/reservations"},"Dashboard")):null,!n||"user"!==r&&"supplier"!==r?null:i.a.createElement("li",{className:"nav-item"},i.a.createElement(m.c,{className:"nav-link",to:"/user/reservations"},"Mes R\xe9servations")),!n||"user"!==r&&"supplier"!==r?null:i.a.createElement("li",{className:"nav-item"},i.a.createElement(m.c,{className:"nav-link",to:"/user/gallery"},"Ma Galerie")),n&&"admin"!==r?i.a.createElement("li",{className:"nav-item rec-item-desktop"},i.a.createElement("div",{className:"dropdown mt-2"},i.a.createElement("a",{href:"/recommandations",className:"",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},i.a.createElement(u.a,{icon:g.b,size:"1x"}),i.a.createElement("sup",{className:"ml-1"},s)),c.recommandations&&c.recommandations.length?i.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},i.a.createElement(b,{recommandations:c.recommandations.reverse()}),i.a.createElement("div",{className:"notifications-link py-2"},i.a.createElement(m.b,{id:"notifications-link",className:"notifications-link pt-3 text-center",to:"/user/notifications"},"Voir toutes les notifications"))):null)):null,n?null:i.a.createElement(O.a,null,i.a.createElement("li",{className:"nav-item"},i.a.createElement(m.c,{className:"nav-link",to:"/auth/signup"},i.a.createElement("i",{className:"fa fa-user"}),"Cr\xe9er un compte")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(m.c,{className:"nav-link",to:"/auth/login"},i.a.createElement("i",{className:"fa fa-user"}),"Se connecter")))),n?i.a.createElement("div",{className:"dropdown"},i.a.createElement("p",{className:"dropbtn"},t),i.a.createElement("div",{className:"dropdown-content"},i.a.createElement(m.c,{className:"nav-link",to:"/user/profile"},i.a.createElement("i",{className:"fa fa-user"}),"Mon profil"),i.a.createElement("a",{href:"/auth/login",onClick:this.logout},i.a.createElement("i",{className:"fa fa-sign-out"}),"Logout"))):null))))}}]),a}(o.PureComponent);a.a=Object(d.b)(function(e){return{userId:e.auth.email,email:e.auth.email,name:e.auth.name,token:e.auth.token,role:e.auth.role,accountValidated:e.auth.accountValidated,user:e.auth.user}},function(e){return{onLogout:function(){return e(Object(p.e)())},onAutoSign:function(){return e(Object(p.a)())}}})(C)},119:function(e,a,t){},121:function(e,a,t){},122:function(e,a,t){},134:function(e,a){},161:function(e,a,t){"use strict";var n=t(13),r=t(15),l=t(16),c=t(19),s=t(17),o=t(18),i=t(0),m=t.n(i),u=(t(391),t(202)),d=t.n(u),p=t(24),g=(t(217),t(109)),h=t(110),f=function(e){function a(){var e,t;Object(r.a)(this,a);for(var l=arguments.length,o=new Array(l),i=0;i<l;i++)o[i]=arguments[i];return(t=Object(c.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(o)))).state={date1:null,date2:null,category:"",tag:"",town:""},t.pickDate=function(e,a){t.setState(Object(n.a)({},a,e),t.save)},t.handleChange=function(e){var a=e.target.value.trim(),r=e.target.name;t.setState(Object(n.a)({},r,a),t.save)},t.save=function(){var e=t.state;localStorage.setItem("searchParams",JSON.stringify(e))},t.liveFilter=function(e){e.preventDefault()},t}return Object(o.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.date1,n=a.date2,r=a.category,l=a.town,c=a.tag;return m.a.createElement("section",{className:"filter-row"},m.a.createElement("div",{className:"filter container"},m.a.createElement("div",{className:"row justify-content-center align-items-center py-4"},m.a.createElement("div",{className:"form-group col-sm-6 col-md-2 mt-2"},m.a.createElement("label",{className:"mb-4 d-block",id:"cat"},"Cat\xe9gories"),m.a.createElement("select",{name:"category",id:"inputState",onChange:function(a){return e.handleChange(a)},defaultValue:r,className:"form-control form-control-lg"},m.a.createElement("option",{defaultValue:!0},"Choisir la cat\xe9gorie"),m.a.createElement("option",null,"Coupons"),m.a.createElement("option",null,"Sortir"),m.a.createElement("option",null,"Bar louge & Restaurants"),m.a.createElement("option",null,"Shopping"),m.a.createElement("option",null,"Beaut\xe9 & Sant\xe9"),m.a.createElement("option",null,"Voyages"),m.a.createElement("option",null,"Made in 237"))),m.a.createElement("div",{className:"form-group col-sm-6 col-md-2 mt-sm-2"},m.a.createElement("label",null,"Ville"),m.a.createElement("input",{type:"text",onChange:function(a){return e.handleChange(a)},name:"town",className:"form-control",value:l,id:"ville",placeholder:"Entrez une ville"})),m.a.createElement("div",{className:"form-group col-sm-6 col-md-2 mt-sm-2"},m.a.createElement("label",null,"Tag"),m.a.createElement("input",{type:"text",onChange:function(a){return e.handleChange(a)},name:"tag",className:"form-control",value:c,id:"tag",placeholder:"Entrez un tag"})),m.a.createElement("div",{className:"form-group col-sm-6 col-md-2 mt-sm-2"},m.a.createElement("label",null,"Se d\xe9roulant entre le:"),m.a.createElement(d.a,{dateFormat:"Pp",placeholderText:"Choisissez une date",className:"form-control",selected:t,onChange:function(a){return e.pickDate(a,"date1")}})),m.a.createElement("div",{className:"form-group col-sm-6 col-md-2 mt-sm-2"},m.a.createElement("label",null,"Et le:"),m.a.createElement(d.a,{dateFormat:"Pp",id:"date2",placeholderText:"Choisissez une date",className:"form-control",selected:n,onChange:function(a){return e.pickDate(a,"date2")}})),m.a.createElement("div",{className:"form-group col-sm-12 col-md-1 mt-sm-2"},m.a.createElement(p.b,{to:"/filter",className:"button"},m.a.createElement(g.a,{icon:h.j,size:"1x"}))))))}}]),a}(i.Component);a.a=f},250:function(e,a,t){"use strict";var n=t(15),r=t(16),l=t(19),c=t(17),s=t(18),o=t(0),i=t.n(o),m=t(24),u=t(469),d=t.n(u),p=t(470),g=t.n(p),h=t(471),f=t.n(h),v=t(472),E=t.n(v),N=t(473),b=t.n(N),y=t(474),w=t.n(y),k=t(475),x=t.n(k),S=function(e){var a=e.category,t=a.name.split(" ").join("-"),n="";return n="events"===window.location.pathname.split("/")[1]?"/events/category/"+t:"services"===window.location.pathname.split("/")[1]?"/services/category/"+t:"/category/"+t,i.a.createElement("div",{className:"wrimagecard wrimagecard-topimage"},i.a.createElement(m.c,{to:n},i.a.createElement("div",{className:"wrimagecard-topimage_header"},i.a.createElement("center",null,"Coupons"===a.name&&i.a.createElement("img",{src:w.a,alt:""}),"Sortir"===a.name&&i.a.createElement("img",{src:b.a,alt:""}),"Bar louge & Restaurants"===a.name&&i.a.createElement("img",{src:f.a,alt:""}),"Beaut\xe9 & Sant\xe9"===a.name&&i.a.createElement("img",{src:d.a,alt:""}),"Voyages"===a.name&&i.a.createElement("img",{src:E.a,alt:""}),"Shopping"===a.name&&i.a.createElement("img",{src:g.a,alt:""}),"Made in 237"===a.name&&i.a.createElement("img",{src:x.a,alt:""}))),i.a.createElement("div",{className:"wrimagecard-topimage_title"},i.a.createElement("p",{className:e.selected?"text-center selected":"text-center"},a.name))))},j=(t(392),t(9)),O=t.n(j),C=t(105),V=t(476),A=t.n(V),D=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(c.a)(a)).call.apply(e,[this].concat(s)))).state={selected:!1,categories:[],loading:!0,error:null},t.fetchCategories=function(){O.a.get("/api/category/all").then(function(e){localStorage.setItem("categories",JSON.stringify(e.data.categories)),t.setState({categories:e.data.categories,loading:!1})}).catch(function(e){t.setState({error:"Une erreur s'est produite",loading:!1})})},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=JSON.parse(localStorage.getItem("categories"));a?(this.setState({categories:a,loading:!1}),O.a.get("/api/category/all").then(function(t){JSON.stringify(a)!==JSON.stringify(t.data.categories)&&(localStorage.setItem("categories",JSON.stringify(t.data.categories)),console.log("Categories changed"),e.setState({categories:t.data.categories,loading:!1}))}).catch(function(a){e.setState({error:"Une erreur s'est produite",loading:!1})})):this.fetchCategories()}},{key:"render",value:function(){var e=this,a=this.state,t=a.categories,n=a.loading,r=i.a.createElement("div",{className:"d-block ml-auto mr-auto"},i.a.createElement(C.a,null));return!n&&t.length&&(r=t.map(function(a){return e.props.selected===a.name?i.a.createElement(S,{selected:!0,key:a._id,category:a}):i.a.createElement(S,{key:a._id,category:a})})),i.a.createElement("section",{className:"categories"},i.a.createElement("div",{className:"container pb-4"},i.a.createElement("div",{className:"row py-5"},i.a.createElement("div",{className:"col"},i.a.createElement("center",null,i.a.createElement("h2",{className:"pt-4 service-header"},"Parcourir par cat\xe9gorie")))),i.a.createElement("div",{className:"row pb-5 categories-wrapper"},r,i.a.createElement("div",{className:"wrimagecard wrimagecard-topimage"},i.a.createElement("a",{href:"/gallery"},i.a.createElement("div",{className:"wrimagecard-topimage_header"},i.a.createElement("center",null,i.a.createElement("center",null,i.a.createElement("img",{src:A.a,alt:"Galerie"})))),i.a.createElement("div",{className:"wrimagecard-topimage_title"},i.a.createElement("p",{className:"text-center"},"Galerie")))))))}}]),a}(o.Component);a.a=D},391:function(e,a,t){},392:function(e,a,t){},469:function(e,a,t){e.exports=t.p+"static/media/biceps.61302d89.svg"},470:function(e,a,t){e.exports=t.p+"static/media/shopping-store.3c854bf9.svg"},471:function(e,a,t){e.exports=t.p+"static/media/meat.d6e5b490.svg"},472:function(e,a,t){e.exports=t.p+"static/media/map-location.17ee361c.svg"},473:function(e,a,t){e.exports=t.p+"static/media/idea.d6e0b16d.svg"},474:function(e,a,t){e.exports=t.p+"static/media/graphic-design.8abfb9cb.svg"},475:function(e,a,t){e.exports=t.p+"static/media/237maded.5f6e9e61.png"},476:function(e,a,t){e.exports=t.p+"static/media/photo.e3cd8550.svg"}}]);
//# sourceMappingURL=5.c66f2f6e.chunk.js.map