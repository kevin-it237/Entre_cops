(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{104:function(e,t){function a(){return e.exports=a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},a.apply(this,arguments)}e.exports=a},107:function(e,t){e.exports=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}},111:function(e,t,a){"use strict";var n=a(117),r=a(100);t.__esModule=!0,t.useBootstrapPrefix=d,t.createBootstrapComponent=function(e,t){"string"===typeof t&&(t={prefix:t});var a=e.prototype&&e.prototype.isReactComponent,n=t,r=n.prefix,i=n.forwardRefAs,u=void 0===i?a?"ref":"innerRef":i;return(0,l.default)(function(t,a){var n=(0,o.default)({},t);n[u]=a;var l=d(n.bsPrefix,r);return s.default.createElement(e,(0,o.default)({},n,{bsPrefix:l}))},{displayName:"Bootstrap("+(e.displayName||e.name)+")"})},t.default=t.ThemeConsumer=void 0;var o=r(a(104)),l=r(a(178)),s=n(a(0)),i=s.default.createContext({}),u=i.Consumer,c=i.Provider;function d(e,t){var a=(0,s.useContext)(i);return e||a[t]||t}t.ThemeConsumer=u;var f=function(e){var t=e.prefixes,a=e.children,n=(0,s.useMemo)(function(){return(0,o.default)({},t)},[t]);return s.default.createElement(c,{value:n},a)};t.default=f},117:function(e,t){function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;var t=a();if(t&&t.has(e))return t.get(e);var n={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=r?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}}return n.default=e,t&&t.set(e,n),n}},118:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=function(e,t){var a=void 0===t?{}:t,n=a.displayName,i=void 0===n?c(e):n,d=a.Component,f=void 0===d?"div":d,m=a.defaultProps,p=s.default.forwardRef(function(t,a){var n=t.className,i=t.bsPrefix,c=t.as,d=void 0===c?f:c,m=(0,o.default)(t,["className","bsPrefix","as"]),p=(0,u.useBootstrapPrefix)(i,e);return s.default.createElement(d,(0,r.default)({ref:a,className:(0,l.default)(n,p)},m))});return p.defaultProps=m,p.displayName=i,p};var r=n(a(104)),o=n(a(107)),l=n(a(102)),s=n(a(0)),i=n(a(168)),u=a(111),c=function(e){return e[0].toUpperCase()+(0,i.default)(e).slice(1)};e.exports=t.default},120:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var n=a(0),r=a.n(n),o=a(125),l=a.n(o),s=(a(165),a(166),function(e){return r.a.createElement(l.a,null)}),i=function(e,t,a){o.store.addNotification({title:t,message:a,type:e,insert:"top",container:"top-center",animationIn:["animated","bounceIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!1}})}},126:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=n(a(107)),o=n(a(104)),l=n(a(25)),s=n(a(102)),i=n(a(175)),u=n(a(142)),c=n(a(130)),d=n(a(127)),f=n(a(0)),m=n(a(176)),p=n(a(148)),h=n(a(150)),g=n(a(151)),v=n(a(152)),E=n(a(153)),b=n(a(155)),y=n(a(157)),N=a(111),w=n(a(128)),x={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:g.default,manager:new y.default};function S(e){return f.default.createElement(p.default,e)}function C(e){return f.default.createElement(p.default,e)}var k=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={style:{}},t.modalContext={onHide:function(){return t.props.onHide()}},t.setModalRef=function(e){t._modal=e},t.handleDialogMouseDown=function(){t._waitingForMouseUp=!0},t.handleMouseUp=function(e){t._waitingForMouseUp&&e.target===t._modal.dialog&&(t._ignoreBackdropClick=!0),t._waitingForMouseUp=!1},t.handleClick=function(e){t._ignoreBackdropClick||e.target!==e.currentTarget?t._ignoreBackdropClick=!1:t.props.onHide()},t.handleEnter=function(e){var a;e&&(e.style.display="block",t.updateDialogStyle(e));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.props.onEnter&&(a=t.props).onEnter.apply(a,[e].concat(r))},t.handleEntering=function(e){for(var a,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.props.onEntering&&(a=t.props).onEntering.apply(a,[e].concat(r)),i.default.on(window,"resize",t.handleWindowResize)},t.handleExited=function(e){var a;e&&(e.style.display="");for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.props.onExited&&(a=t.props).onExited.apply(a,r),i.default.off(window,"resize",t.handleWindowResize)},t.handleWindowResize=function(){t.updateDialogStyle(t._modal.dialog)},t.renderBackdrop=function(e){var a=t.props,n=a.bsPrefix,r=a.backdropClassName,l=a.animation;return f.default.createElement("div",(0,o.default)({},e,{className:(0,s.default)(n+"-backdrop",r,!l&&"show")}))},t}(0,l.default)(t,e);var a=t.prototype;return a.componentWillUnmount=function(){i.default.off(window,"resize",this.handleWindowResize)},a.updateDialogStyle=function(e){if(c.default){var t=this.props.manager.isContainerOverflowing(this._modal),a=e.scrollHeight>(0,u.default)(e).documentElement.clientHeight;this.setState({style:{paddingRight:t&&!a?(0,d.default)():void 0,paddingLeft:!t&&a?(0,d.default)():void 0}})}},a.render=function(){var e=this.props,t=e.bsPrefix,a=e.className,n=e.style,l=e.dialogClassName,i=e.children,u=e.dialogAs,c=e.show,d=e.animation,p=e.backdrop,h=e.keyboard,g=e.manager,v=e.onEscapeKeyDown,E=e.onShow,b=e.onHide,y=e.container,N=e.autoFocus,x=e.enforceFocus,k=e.restoreFocus,_=e.onEntered,O=e.onExit,B=e.onExiting,M=(e.onExited,e.onEntering,e.onEnter,e.onEntering,e.backdropClassName,(0,r.default)(e,["bsPrefix","className","style","dialogClassName","children","dialogAs","show","animation","backdrop","keyboard","manager","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","onEntered","onExit","onExiting","onExited","onEntering","onEnter","onEntering","backdropClassName"])),R=!0===p?this.handleClick:null,P=(0,o.default)({},n,{},this.state.style);return d||(P.display="block"),f.default.createElement(w.default.Provider,{value:this.modalContext},f.default.createElement(m.default,{show:c,backdrop:p,container:y,keyboard:h,autoFocus:N,enforceFocus:x,restoreFocus:k,onEscapeKeyDown:v,onShow:E,onHide:b,onEntered:_,onExit:O,onExiting:B,manager:g,ref:this.setModalRef,style:P,className:(0,s.default)(a,t),containerClassName:t+"-open",transition:d?S:void 0,backdropTransition:d?C:void 0,renderBackdrop:this.renderBackdrop,onClick:R,onMouseUp:this.handleMouseUp,onEnter:this.handleEnter,onEntering:this.handleEntering,onExited:this.handleExited},f.default.createElement(u,(0,o.default)({},M,{onMouseDown:this.handleDialogMouseDown,className:l}),i)))},t}(f.default.Component);k.defaultProps=x;var _=(0,N.createBootstrapComponent)(k,"modal");_.Body=h.default,_.Header=E.default,_.Title=b.default,_.Footer=v.default,_.Dialog=g.default,_.TRANSITION_DURATION=300,_.BACKDROP_TRANSITION_DURATION=150;var O=_;t.default=O,e.exports=t.default},128:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=n(a(0)).default.createContext({onHide:function(){}});t.default=r,e.exports=t.default},148:function(e,t,a){"use strict";var n=a(100),r=a(117);t.__esModule=!0,t.default=void 0;var o,l=n(a(104)),s=n(a(107)),i=n(a(102)),u=r(a(0)),c=r(a(180)),d=n(a(177)),f=n(a(149)),m=((o={})[c.ENTERING]="show",o[c.ENTERED]="show",o),p=u.default.forwardRef(function(e,t){var a=e.className,n=e.children,r=(0,s.default)(e,["className","children"]),o=(0,u.useCallback)(function(e){(0,f.default)(e),r.onEnter&&r.onEnter(e)},[r]);return u.default.createElement(c.default,(0,l.default)({ref:t,addEndListener:d.default},r,{onEnter:o}),function(e,t){return u.default.cloneElement(n,(0,l.default)({},t,{className:(0,i.default)("fade",a,n.props.className,m[e])}))})});p.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},p.displayName="Fade";var h=p;t.default=h,e.exports=t.default},149:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e){e.offsetHeight},e.exports=t.default},150:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=(0,n(a(118)).default)("modal-body");t.default=r,e.exports=t.default},151:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=n(a(104)),o=n(a(107)),l=n(a(102)),s=n(a(0)),i=a(111),u=s.default.forwardRef(function(e,t){var a=e.bsPrefix,n=e.className,u=e.centered,c=e.size,d=e.children,f=e.scrollable,m=(0,o.default)(e,["bsPrefix","className","centered","size","children","scrollable"]),p=(a=(0,i.useBootstrapPrefix)(a,"modal"))+"-dialog";return s.default.createElement("div",(0,r.default)({},m,{ref:t,className:(0,l.default)(p,n,c&&a+"-"+c,u&&p+"-centered",f&&p+"-scrollable")}),s.default.createElement("div",{className:(0,l.default)(a+"-content")},d))});u.displayName="ModalDialog";var c=u;t.default=c,e.exports=t.default},152:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=(0,n(a(118)).default)("modal-footer");t.default=r,e.exports=t.default},153:function(e,t,a){"use strict";var n=a(117),r=a(100);t.__esModule=!0,t.default=void 0;var o=r(a(104)),l=r(a(107)),s=r(a(102)),i=n(a(0)),u=r(a(160)),c=a(111),d=r(a(154)),f=r(a(128)),m=i.default.forwardRef(function(e,t){var a=e.bsPrefix,n=e.closeLabel,r=e.closeButton,m=e.onHide,p=e.className,h=e.children,g=(0,l.default)(e,["bsPrefix","closeLabel","closeButton","onHide","className","children"]);a=(0,c.useBootstrapPrefix)(a,"modal-header");var v=(0,i.useContext)(f.default),E=(0,u.default)(function(){v&&v.onHide(),m&&m()});return i.default.createElement("div",(0,o.default)({ref:t},g,{className:(0,s.default)(p,a)}),h,r&&i.default.createElement(d.default,{label:n,onClick:E}))});m.displayName="ModalHeader",m.defaultProps={closeLabel:"Close",closeButton:!1};var p=m;t.default=p,e.exports=t.default},154:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=n(a(104)),o=n(a(107)),l=n(a(1)),s=n(a(0)),i=n(a(102)),u={label:l.default.string.isRequired,onClick:l.default.func},c=s.default.forwardRef(function(e,t){var a=e.label,n=e.onClick,l=e.className,u=(0,o.default)(e,["label","onClick","className"]);return s.default.createElement("button",(0,r.default)({ref:t,type:"button",className:(0,i.default)("close",l),onClick:n},u),s.default.createElement("span",{"aria-hidden":"true"},"\xd7"),s.default.createElement("span",{className:"sr-only"},a))});c.displayName="CloseButton",c.propTypes=u,c.defaultProps={label:"Close"};var d=c;t.default=d,e.exports=t.default},155:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=n(a(118)),o=(0,n(a(156)).default)("h4"),l=(0,r.default)("modal-title",{Component:o});t.default=l,e.exports=t.default},156:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=n(a(104)),o=n(a(0)),l=n(a(102));t.default=function(e){return o.default.forwardRef(function(t,a){return o.default.createElement("div",(0,r.default)({},t,{ref:a,className:(0,l.default)(t.className,e)}))})},e.exports=t.default},157:function(e,t,a){"use strict";var n=a(100);t.__esModule=!0,t.default=void 0;var r=n(a(25)),o=n(a(147)),l=n(a(158)),s=n(a(127)),i=n(a(167)),u=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",c=".sticky-top",d=".navbar-toggler",f=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).adjustAndStore=function(e,t,a){var n=t.style[e];t.dataset[e]=n,(0,l.default)(t,e,parseFloat((0,l.default)(t,e))+a+"px")},t.restore=function(e,t){var a=t.dataset[e];void 0!==a&&(delete t.dataset[e],(0,l.default)(t,e,a))},t}(0,r.default)(t,e);var a=t.prototype;return a.setContainerStyle=function(t,a){var n=this;if(e.prototype.setContainerStyle.call(this,t,a),t.overflowing){var r=(0,s.default)();(0,o.default)(a,u).forEach(function(e){return n.adjustAndStore("paddingRight",e,r)}),(0,o.default)(a,c).forEach(function(e){return n.adjustAndStore("margingRight",e,-r)}),(0,o.default)(a,d).forEach(function(e){return n.adjustAndStore("margingRight",e,r)})}},a.removeContainerStyle=function(t,a){var n=this;e.prototype.removeContainerStyle.call(this,t,a),(0,o.default)(a,u).forEach(function(e){return n.restore("paddingRight",e)}),(0,o.default)(a,c).forEach(function(e){return n.restore("margingRight",e)}),(0,o.default)(a,d).forEach(function(e){return n.restore("margingRight",e)})},t}(i.default);t.default=f,e.exports=t.default},518:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(16),o=a(19),l=a(17),s=a(32),i=a(18),u=a(0),c=a.n(u),d=a(126),f=a.n(d),m=a(105),p=a(256),h=a.n(p),g=a(120),v=a(9),E=a.n(v),b=a(29),y=a(103),N=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).onSelectImage=function(e,t){var n=a.state.images.slice(),r=n[e];r.hasOwnProperty("isSelected")?r.isSelected=!r.isSelected:r.isSelected=!0,a.setState({images:n})},a.onSelectImageToRemove=function(e,t){var n=a.state.currentBanner.slice(),r=n[e];r.hasOwnProperty("isSelected")?r.isSelected=!r.isSelected:r.isSelected=!0,a.setState({currentBanner:n},function(){a.state.currentBanner.filter(function(e){return!0===e.isSelected}).length?a.setState({imageToDelete:!0}):a.setState({imageToDelete:!1})})},a.preview=function(e){var t=Array.from(e.target.files).map(function(e){return URL.createObjectURL(e)});a.setState({previewImages:t,imagesToUpload:e.target.files})},a.getImages=function(){E.a.get("/api/banner").then(function(e){var t=e.data.banners.map(function(e){return{src:e.link,thumbnail:e.link,thumbnailWidth:320,thumbnailHeight:213,thumbnailCaption:e.title,id:e._id}});a.setState({loading:!1,successUpload:!0,currentBanner:t})}).catch(function(e){a.setState({error:"Une erreur s'est produite, veuillez re\xe9ssayer",loading:!1,successUpload:!1})})},a.setBanner=function(){var e=a.state.images.filter(function(e){return!0===e.isSelected});e.length?(a.setState({loading:!0}),E.a.post("/api/banner/set",{bannerImages:e}).then(function(e){a.setState({error:""}),a.getImages()}).catch(function(e){a.setState({loading:!1,error:"Une erreur s'est produite, veuillez re\xe9ssayer"})})):Object(g.b)("warning","Banni\xe8re!","S\xe9lectionnez des images \xe0 configurer sur la banni\xe8re")},a.removeToBanner=function(){var e=a.state.currentBanner.filter(function(e){return!0===e.isSelected});e.length?(a.setState({loading:!0}),E.a.patch("/api/banner/remove",{bannerImages:e}).then(function(e){a.setState({error:"",imageToDelete:!1}),a.getImages()}).catch(function(e){a.setState({loading:!1,error:"Une erreur s'est produite, veuillez re\xe9ssayer",imageToDelete:!1})})):Object(g.b)("warning","Banni\xe8re!","S\xe9lectionnez des images \xe0 enlever de la banni\xe8re")},a.makeSearch=function(e){a.setState({searching:!0,results:[]}),e.length>1?E.a.get("/api/event/"+e+"/search").then(function(t){var n=[];t.data.events.forEach(function(e){e.eventType="event",a.state.results.includes(e)||n.push(e)}),E.a.get("/api/service/"+e+"/search").then(function(e){var t=[];e.data.services.forEach(function(e){e.eventType="service",a.state.results.includes(e)||t.push(e)}),a.setState({results:[].concat(n,t),searching:!1})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})}):a.setState({searching:!1,results:[]})},a.selectOne=function(e,t){e.preventDefault();var n=t.images.map(function(e){return{src:b.a+"/"+e,thumbnail:b.a+"/"+e,thumbnailWidth:320,thumbnailHeight:213,followlink:"/annonce/"+t.eventType+"/"+t._id,title:t.title,id:t._id}});a.setState({selectedOne:t,showModal:!1,images:n})},a.state={loading:!0,showModal:!1,searching:!1,imageToDelete:!1,selectedOne:null,images:[],error:"",currentBanner:[],results:[],imagesToUpload:[],previewImages:null,successUpload:!1},a.onCurrentImageChange=a.onCurrentImageChange.bind(Object(s.a)(a)),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getImages()}},{key:"onCurrentImageChange",value:function(e){this.setState({currentImage:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.showModal;return c.a.createElement(y.a,null,c.a.createElement(g.a,null),c.a.createElement("div",{className:"container mt-4 mb-5"},c.a.createElement("div",{className:"row pt-5 pb-3"},c.a.createElement("div",{className:"col d-flex justify-content-between align-items-center"},c.a.createElement("h1",null,"Configuration de la banni\xe8re"),c.a.createElement("button",{onClick:function(){return e.setState({showModal:!0})},className:"button"},"CHOISIR LA BANNIERE"))),this.state.error.length?c.a.createElement("div",{className:"d-flex justify-content-center alert-danger alert"},this.state.error):null,this.state.loading?c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(m.a,null)):c.a.createElement(y.a,null,c.a.createElement("div",{className:"row mt-2"},c.a.createElement("div",{className:"col-sm-12 d-flex mt-5 mb-4"},c.a.createElement("h2",null,"Images sur la Banni\xe8re actuelle")),c.a.createElement("div",{className:"col-sm-12"},c.a.createElement(h.a,{images:this.state.currentBanner,onSelectImage:this.onSelectImageToRemove,lightboxWidth:1536,enableLightbox:!0})),this.state.imageToDelete?c.a.createElement("div",{className:"col-sm-12 d-flex justify-content-center mt-5 mb-4"},c.a.createElement("button",{onClick:this.removeToBanner,className:"btn btn-danger"},a?c.a.createElement(m.a,{color:"white"}):"Enlever de la banni\xe8re")):null),this.state.selectedOne?c.a.createElement("div",{className:"row mt-5"},c.a.createElement("div",{className:"col-sm-12 mt-5 mb-4"},c.a.createElement("h2",null,this.state.selectedOne.title),c.a.createElement("h5",null,"Selectionnez des images et enregistrer pour configurer la banni\xe8re.")),c.a.createElement("div",{className:"col-sm-12"},c.a.createElement(h.a,{images:this.state.images,onSelectImage:this.onSelectImage,lightboxWidth:1536})),c.a.createElement("div",{className:"col-sm-12 d-flex mt-5"},c.a.createElement("button",{className:"button",onClick:this.setBanner},"Ajouter \xe0 la banni\xe8re"))):null)),c.a.createElement(f.a,{show:n,onHide:function(){return e.setState({showModal:!1})},size:"lg"},c.a.createElement(f.a.Header,{closeButton:!0},c.a.createElement(f.a.Title,null,"Choisir les images de banni\xe8re")),c.a.createElement(f.a.Body,null,c.a.createElement("form",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 pl-4 pr-4 mt-4 mb-3"},c.a.createElement("div",{className:"row justify-content-center py-3"},c.a.createElement("div",{className:"col-sm-12 col-md-12 mb-2"},c.a.createElement("div",{className:"custom-file"},c.a.createElement("input",{type:"text",onChange:function(t){return e.makeSearch(t.target.value)},placeholder:"Rechercher une actualit\xe9 ou un \xe9v\xe8nement"})))),c.a.createElement("div",{className:"row justify-content-center mt-3"},c.a.createElement("div",{className:"col-sm-12"},this.state.searching?c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(m.a,null)):this.state.results.length>0?this.state.results.map(function(t,a){return c.a.createElement("div",{key:a,className:"d-flex mb-3 align-items-center pb-3",style:{borderBottom:"solid 1px #eee"}},c.a.createElement("img",{src:b.a+"/"+t.image,className:"rounded-circle",width:"50",height:"50",alt:""}),c.a.createElement("h4",{className:"ml-3"},t.title," "),c.a.createElement("button",{onClick:function(a){return e.selectOne(a,t)},className:"btn btn-dark ml-auto"},"Afficher"))}):c.a.createElement("p",{className:"text-center"},"Pas de r\xe9sultats"))))))))))}}]),t}(u.Component);t.default=N}}]);
//# sourceMappingURL=22.bb000bff.chunk.js.map