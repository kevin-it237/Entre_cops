(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{103:function(e,a,t){"use strict";a.a=function(e){return e.children}},105:function(e,a,t){"use strict";var n=t(0),r=t.n(n);a.a=function(e){return r.a.createElement("div",{className:"spinner-border",role:"status",style:{color:e.color}},r.a.createElement("span",{className:"sr-only"},"Loading..."))}},108:function(e,a,t){e.exports=t.p+"static/media/logo.919201fe.png"},114:function(e,a,t){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(a,"a",function(){return n})},116:function(e,a,t){"use strict";var n=t(15),r=t(16),l=t(19),i=t(17),o=t(18),s=t(0),c=t.n(s),m=t(24),u=t(109),d=t(20),p=t(30),f=t(110),h=(t(121),t(108)),v=t.n(h),g=t(124),E=t.n(g),b=t(114),N=(t(119),function(e){function a(){return Object(n.a)(this,a),Object(l.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=Object(b.a)(this.props.recommandations.reverse());return e.reverse(),c.a.createElement("div",{className:"recommandations d-flex flex-column"},e.slice(0,5).map(function(e,a){return c.a.createElement("div",{key:a,className:e.visited?"rec-item":"notvisited rec-item"},c.a.createElement("a",{href:e.link},c.a.createElement("h4",null,e.title),c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"d-flex flex-row align-items-center"},c.a.createElement(u.a,{icon:f.l,size:"1x"}),c.a.createElement("h6",{className:"ml-2 mb-0"},"Par ",e.name)))))}))}}]),a}(s.Component)),y=t(29),k=(t(122),t(9)),V=t.n(k),j=t(105),I=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(o)))).state={searching:!1,results:[],error:""},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){var a=this;if(e.query!==this.props.query)if(this.props.query&&this.props.query.trim().length>0){var t=this.props.query;this.setState({searching:!0,results:[]}),V.a.get("/api/event/"+t+"/search").then(function(e){var n=[];e.data.events.forEach(function(e){e.eventType="event",a.state.results.includes(e)||n.push(e)}),V.a.get("/api/service/"+t+"/search").then(function(e){var t=[];e.data.services.forEach(function(e){e.eventType="service",a.state.results.includes(e)||t.push(e)}),a.setState({results:[].concat(n,t),searching:!1})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})})}else this.setState({searching:!1})}},{key:"render",value:function(){return c.a.createElement("div",{className:"searchResult-list ".concat(this.props.className)},this.state.error.length?c.a.createElement("div",{className:"alert alert-danger text-center"},this.state.error):null,this.state.searching?c.a.createElement("div",{className:"d-flex justify-content-center p-3"},c.a.createElement(j.a,null)):this.state.results.length?this.state.results.slice(0,10).map(function(e,a){return c.a.createElement(w,{key:a,result:e})}):c.a.createElement("div",{className:"d-flex justify-content-center p-3"},c.a.createElement("span",null,"Aucun r\xe9sultat")))}}]),a}(s.PureComponent),w=function(e){return c.a.createElement("a",{href:"/annonce/"+e.result.eventType+"/"+e.result._id,className:"d-flex searchResult-item"},c.a.createElement("img",{src:y.a+"/"+e.result.image,alt:"",className:"mr-3"}),c.a.createElement("div",{className:"d-flex flex-column "},c.a.createElement("h3",null,e.result.title),c.a.createElement("span",{className:"text-muted"},e.result.category)))},x=t(103),O=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=Object(l.a)(this,(e=Object(i.a)(a)).call.apply(e,[this].concat(o)))).state={user:null,name:"",token:null,role:"",accountValidated:null,redirect:!1,query:""},t.logout=function(){t.props.onLogout()},t.handleInputChange=function(e){var a=e.target.value;t.setState({query:a})},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=JSON.parse(localStorage.getItem("authData"));if(a&&a.user){this.setState({user:a.user,name:a.user.name,token:a.token,role:a.user.role,accountValidated:a.user.accountValidated});var t=E()(y.a);t.on("display notification",function(a){var t=JSON.parse(localStorage.getItem("authData"));t&&t.user&&t.user._id===a.to&&e.props.onAutoSign()}),t.on("display anounce notification",function(a){var t=JSON.parse(localStorage.getItem("authData"));t&&t.user&&e.props.onAutoSign()})}}},{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&this.setState({user:this.props.user,name:this.props.name,token:this.props.token,role:this.props.role,accountValidated:this.props.accountValidated})}},{key:"render",value:function(){var e=this,a=this.state,t=a.name,n=a.token,r=a.role,l=a.accountValidated,i=a.user,o=0;i&&i.recommandations&&i.recommandations.length&&(o=i.recommandations.filter(function(e){return!1===e.visited}).length);return c.a.createElement(x.a,null,c.a.createElement("nav",{className:(this.props.home,"navbar navbar-expand-lg navbar-light bg-light navbar-shadow")},c.a.createElement("div",{className:"container"},c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"search-wrapper"},c.a.createElement("form",{className:"form-inline d-lg-none my-2 my-lg-0 navbar-brand form-mobile"},c.a.createElement("input",{onChange:function(a){return e.handleInputChange(a)},className:"form-control mr-sm-2",type:"text",placeholder:"Rechercher...","aria-label":"Rechercher..."}),c.a.createElement(u.a,{icon:f.j,size:"2x"})),this.state.query.trim().length>0?c.a.createElement(I,{query:this.state.query,className:"d-lg-none"}):null),n?c.a.createElement("div",{className:"dropdown-mobile mt-2"},c.a.createElement("a",{href:"/recommandations",className:"",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},c.a.createElement(u.a,{icon:f.b,size:"1x"}),c.a.createElement("sup",{className:"ml-1"},i.recommandations&&i.recommandations.length?i.recommandations.length:0)),i.recommandations&&i.recommandations.length?c.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},c.a.createElement(N,{recommandations:i.recommandations.reverse()}),c.a.createElement("div",{className:"notifications-link py-2"},c.a.createElement("a",{id:"notifications-link",className:"notifications-link pt-3 text-center",href:"/user/notifications"},"Voir toutes les notifications"))):null):null,c.a.createElement(m.b,{className:"navbar-brand",to:"/"},c.a.createElement("img",{src:v.a,width:"110",height:"100%",alt:"Logo"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03"},c.a.createElement("div",{className:"ml-auto search-wrapper"},c.a.createElement("form",{className:"form-inline d-none d-lg-block my-2 my-lg-0 ml-auto mr-4 form-desktop"},c.a.createElement("input",{onChange:function(a){return e.handleInputChange(a)},className:"form-control mr-sm-2",type:"text",placeholder:"Rechercher...","aria-label":"Rechercher..."}),c.a.createElement(u.a,{icon:f.j,size:"2x"})),this.state.query.trim().length>0?c.a.createElement(I,{query:this.state.query,className:"d-none d-lg-block"}):null),c.a.createElement("ul",{className:"navbar-nav  mt-2 mt-lg-0"},n&&"admin"===r?c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/admin/home"},"Admin Dashboard")):null,n&&"supplier"===r&&l?c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/dashboard/reservations"},"Dashboard")):null,!n||"user"!==r&&"supplier"!==r?null:c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/user/reservations"},"Mes R\xe9servations")),!n||"user"!==r&&"supplier"!==r?null:c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/user/gallery"},"Ma Galerie")),n&&"admin"!==r?c.a.createElement("li",{className:"nav-item rec-item-desktop"},c.a.createElement("div",{className:"dropdown mt-2"},c.a.createElement("a",{href:"/recommandations",className:"",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},c.a.createElement(u.a,{icon:f.b,size:"1x"}),c.a.createElement("sup",{className:"ml-1"},o)),i.recommandations&&i.recommandations.length?c.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},c.a.createElement(N,{recommandations:i.recommandations.reverse()}),c.a.createElement("div",{className:"notifications-link py-2"},c.a.createElement(m.b,{id:"notifications-link",className:"notifications-link pt-3 text-center",to:"/user/notifications"},"Voir toutes les notifications"))):null)):null,n?null:c.a.createElement(x.a,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/auth/signup"},c.a.createElement("i",{className:"fa fa-user"}),"Cr\xe9er un compte")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/auth/login"},c.a.createElement("i",{className:"fa fa-user"}),"Se connecter")))),n?c.a.createElement("div",{className:"dropdown"},c.a.createElement("p",{className:"dropbtn"},t),c.a.createElement("div",{className:"dropdown-content"},c.a.createElement(m.c,{className:"nav-link",to:"/user/profile"},c.a.createElement("i",{className:"fa fa-user"}),"Mon profil"),c.a.createElement("a",{href:"/auth/login",onClick:this.logout},c.a.createElement("i",{className:"fa fa-sign-out"}),"Logout"))):null))))}}]),a}(s.PureComponent);a.a=Object(d.b)(function(e){return{userId:e.auth.email,email:e.auth.email,name:e.auth.name,token:e.auth.token,role:e.auth.role,accountValidated:e.auth.accountValidated,user:e.auth.user}},function(e){return{onLogout:function(){return e(Object(p.e)())},onAutoSign:function(){return e(Object(p.a)())}}})(O)},119:function(e,a,t){},121:function(e,a,t){},122:function(e,a,t){},131:function(e,a,t){"use strict";t.d(a,"a",function(){return u});var n=t(15),r=t(16),l=t(19),i=t(17),o=t(18),s=t(0),c=t.n(s),m=t(103),u=function(e){function a(e){var t;return Object(n.a)(this,a),(t=Object(l.a)(this,Object(i.a)(a).call(this,e))).state={url:""},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"preview",value:function(e){this.setState({url:URL.createObjectURL(e.target.files[0])}),this.props.setFile(this.props.name,e.target.files[0])}},{key:"render",value:function(){var e=this,a=this.state.url,t=this.props,n=t.label,r=t.oldUrl,l=t.type,i=t.isEditing,o="image"===l?"image/png,image/jpeg,image/jpg":"document"===l?".docx, .pptx, .pdf":"video/*";return c.a.createElement(m.a,null,c.a.createElement("button",{disabled:i,type:"button",className:"btn btn-dark mb-2",onClick:function(){return e.inputElement.click()}},n," "),c.a.createElement("input",{style:{visibility:"hidden"},accept:o,onChange:function(a){return e.preview(a)},ref:function(a){return e.inputElement=a},type:"file"}),c.a.createElement("div",{className:"ibox"},c.a.createElement("div",{className:"ibox-content product-box active"},c.a.createElement("div",{className:a||r?"":"product-imitation"},"",(a||r)&&"image"===l?c.a.createElement("img",{src:a||r,accept:o,alt:"",style:{width:"100%"}}):"",(a||r)&&"document"===l?c.a.createElement("iframe",{src:a||r||"",projectName:"Funnel PDF",align:"top",width:"100%",frameBorder:"0",title:"Doc",target:"Message"},c.a.createElement("p",null,"Your browser doesn't support Iframe. Here is a ",c.a.createElement("a",{href:a||r},"link to the document")," instead.")," "):"",(a||r)&&"video"===l?c.a.createElement("video",{src:a||r||"",width:"100%",controls:!0},c.a.createElement("p",null,"Your browser doesn't support HTML5 video. Here is a ",c.a.createElement("a",{href:a||r},"link to the video")," instead.")," "):""))))}}]),a}(s.Component)},134:function(e,a){},218:function(e,a,t){},224:function(e,a,t){"use strict";var n=t(13),r=t(15),l=t(16),i=t(19),o=t(17),s=t(18),c=t(0),m=t.n(c),u=t(9),d=t.n(u),p=(t(225),t(11)),f=t(131),h=t(103),v=t(105),g=function(e){function a(){var e,t;Object(r.a)(this,a);for(var l=arguments.length,s=new Array(l),c=0;c<l;c++)s[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(o.a)(a)).call.apply(e,[this].concat(s)))).state={name:"",email:"",tel:"",location:"",services:[],profileImage:"",otherInfos:"",mapLink:"",isTyping:!1,formValid:!1,emailValid:!1,nameValid:!1,telValid:!1,locationValid:!1,servicesValid:!1,profileImageValid:!1,otherInfosValid:!1,loading:!1,redirect:!1,error:""},t.handleInputChange=function(e){var a;e.preventDefault();var r=e.target.name,l=e.target.value;t.setState((a={},Object(n.a)(a,r,l),Object(n.a)(a,"error",""),a),function(){t.validateField(r,l)})},t.validateField=function(e,a){var n=t.state,r=n.emailValid,l=n.nameValid,i=n.telValid,o=n.locationValid,s=n.servicesValid,c=n.profileImageValid,m=n.otherInfosValid;switch(e){case"email":r=a.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i);break;case"name":l=a.length>0;break;case"tel":i=a.length>0;break;case"location":o=a.length>0;break;case"services":s=a.length>0;break;case"profileImage":c=a.length>0;break;case"otherInfos":m=a.length>0}t.setState({emailValid:r,nameValid:l,telValid:i,locationValid:o,servicesValid:s,profileImageValid:c,otherInfosValid:m},t.validateForm)},t.validateForm=function(){t.setState({formValid:t.state.emailValid&&4===t.state.emailValid.length&&t.state.nameValid&&t.state.telValid&&t.state.locationValid&&t.state.servicesValid&&t.state.profileImageValid&&t.state.otherInfosValid})},t.handleSubmit=function(e){if(e.preventDefault(),t.state.formValid){var a=new FormData,n=t.state,r=n.email,l=n.name,i=n.tel,o=n.location,s=n.services,c=n.profileImage,m=n.otherInfos,u=n.mapLink;a.append("name",l),a.append("email",r),a.append("tel",i),a.append("location",o),a.append("services",s),a.append("profileImage",c),a.append("otherInfos",m),a.append("mapLink",u);t.setState({loading:!0});try{d.a.post("/api/supplier/new",a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){t.setState({loading:!1,redirect:!0}),t.props.closeModal&&t.props.closeModal()}).catch(function(e){"EMAIL_EXIST"===e.response.data.message?t.setState({error:"Adresse Email d\xe9ja utilis\xe9e",loading:!1}):t.setState({error:"Erreur de connexion. Veuillez re\xe9ssayer",loading:!1})})}catch(p){t.setState({error:"Erreur de connexion. Veuillez re\xe9ssayer",loading:!1})}}else t.setState({error:"Veuillez remplir tous les champs",isTyping:!0})},t}return Object(s.a)(a,e),Object(l.a)(a,[{key:"setFile",value:function(e,a){var t;this.setState((t={},Object(n.a)(t,e,a),Object(n.a)(t,"profileImageValid",!0),Object(n.a)(t,"error",""),t),this.validateForm)}},{key:"render",value:function(){var e=this,a=this.state,t=a.isTyping,n=a.name,r=a.tel,l=a.services,i=a.location,o=a.locationValid,s=a.otherInfos,c=a.emailValid,u=a.telValid,d=a.email,g=a.nameValid,E=a.profileImage,b=a.servicesValid,N=a.otherInfosValid,y=a.profileImageValid,k=a.error,V=a.loading,j=a.mapLink;return m.a.createElement(h.a,null,this.state.redirect&&this.props.closeTo?m.a.createElement(p.a,{to:this.props.closeTo}):null,m.a.createElement("form",null,k&&k.length?m.a.createElement("div",{className:"alert alert-danger",style:{fontSize:"1.3rem"}},k):null,m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Nom complet"),m.a.createElement("input",{type:"text",className:t&&!g?"form-control is-invalid":"form-control",value:n,onChange:function(a){return e.handleInputChange(a)},name:"name",id:"name",placeholder:"Nom complet"}),t&&!g?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"email"},"Adresse Email"),m.a.createElement("input",{type:"email",className:t&&!c?"form-control is-invalid":"form-control",value:d,onChange:function(a){return e.handleInputChange(a)},name:"email",id:"email",placeholder:"Adresse Email"}),t&&!c?m.a.createElement("div",{className:"invalid-feedback"},"Email invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"tel"},"Numero de T\xe9l\xe9phone"),m.a.createElement("input",{type:"tel",className:t&&!u?"form-control is-invalid":"form-control",value:r,onChange:function(a){return e.handleInputChange(a)},name:"tel",id:"tel",pattern:"[0-9]{9}",placeholder:"Numero de T\xe9l\xe9phone"}),t&&!u?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Localisation"),m.a.createElement("input",{type:"text",className:t&&!o?"form-control is-invalid":"form-control",value:i,onChange:function(a){return e.handleInputChange(a)},name:"location",id:"location",placeholder:"Localisation"}),t&&!o?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Lien Google Map"),m.a.createElement("input",{type:"text",className:"form-control",value:j,onChange:function(a){return e.handleInputChange(a)},name:"mapLink",id:"mapLink",placeholder:"Lien Google Map"})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},'Vos services (S\xe9parez par des virgules: ",")'),m.a.createElement("textarea",{type:"text",className:t&&!b?"form-control is-invalid":"form-control",value:l,onChange:function(a){return e.handleInputChange(a)},name:"services",rows:3,placeholder:"Services"}),t&&!b?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Autres informations"),m.a.createElement("textarea",{type:"text",className:t&&!N?"form-control is-invalid":"form-control",value:s,onChange:function(a){return e.handleInputChange(a)},name:"otherInfos",rows:3,placeholder:"Autres informations"}),t&&!N?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"row align-items-center justify-content-center py-3"},m.a.createElement("div",{className:"col-sm-8 col-md-8 col-lg-6 d-flex flex-column justify-content-center align-items-center"},m.a.createElement(f.a,{type:"image",oldUrl:E,setFile:function(a,t){return e.setFile(a,t)},name:"profileImage",label:"Image de Profil"}),t&&!y?m.a.createElement("p",{className:"alert alert-danger"},"Image Requise"):null)),m.a.createElement("div",{className:"d-flex justify-content-end"},m.a.createElement("button",{disabled:V,type:"submit",onClick:function(a){return e.handleSubmit(a)},className:"button fourth mt-4 mb-5"},V?m.a.createElement(v.a,{color:"white"}):"Valider"))))}}]),a}(c.Component);a.a=g},225:function(e,a,t){},619:function(e,a,t){"use strict";t.r(a);var n=t(15),r=t(16),l=t(19),i=t(17),o=t(18),s=t(0),c=t.n(s),m=t(116),u=t(224),d=t(103),p=(t(218),function(e){function a(){return Object(n.a)(this,a),Object(l.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement(d.a,null,c.a.createElement(m.a,null),c.a.createElement("section",{className:"supplier-view-page",style:{marginTop:"5rem"}},c.a.createElement("div",{className:"container my-5"},c.a.createElement("div",{className:"row justify-content-center mt-5"},c.a.createElement("div",{className:"col-sm-11 col-md-10 col-lg-8 mb-5 supplier-registration-form"},c.a.createElement("div",{className:"row mb-5"},c.a.createElement("div",{className:"col-sm-12"},c.a.createElement("h2",{className:"text-center mb-3"},"DEVINIR UN PARTENAIRE"),c.a.createElement("h5",{className:"text-center mb-5"},"Vous serez contactez par email pour confirmer votre compte apr\xe8s v\xe9rification de vos informations."),c.a.createElement("hr",null))),c.a.createElement(u.a,{closeTo:"/"}))))))}}]),a}(s.Component));a.default=p}}]);
//# sourceMappingURL=23.44b1d086.chunk.js.map