(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{102:function(e,a){},129:function(e,a,t){"use strict";a.a=function(e){return e.children}},280:function(e,a,t){},281:function(e,a,t){"use strict";var n=t(15),r=t(16),l=t(19),o=t(17),s=t(18),i=t(0),c=t.n(i),m=t(30),u=t(20),d=t(31),p=t(362),h=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(o.a)(a)).call.apply(e,[this].concat(s)))).state={disabled:""},t.startAuth=function(){t.state.disabled||(t.popup=t.openPopup(),t.checkPopup(),t.setState({disabled:"disabled"}))},t.closeCard=function(){t.setState({user:{}})},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.props,t=a.socket,n=a.provider;t.on(n,function(a){e.popup.close();var t=a.name,n=a.photo;e.props.onLogin(t,n)})}},{key:"checkPopup",value:function(){var e=this,a=setInterval(function(){var t=e.popup;t&&!t.closed&&void 0!==t.closed||(clearInterval(a),e.setState({disabled:""}))},1e3)}},{key:"openPopup",value:function(){var e=this.props,a=e.provider,t=e.socket,n=window.innerWidth/2-300,r=window.innerHeight/2-300,l="".concat(m.a,"/api/auth/").concat(a,"?socketId=").concat(t.id);return window.open(l,"","toolbar=no, location=no, directories=no, status=no, menubar=no, \n      scrollbars=no, resizable=no, copyhistory=no, width=".concat(600,", \n      height=").concat(600,", top=").concat(r,", left=").concat(n))}},{key:"render",value:function(){var e=this.props.provider,a=this.state.disabled;return c.a.createElement(i.Fragment,null,"google"===e&&c.a.createElement(p.GoogleLoginButton,{disabled:a,onClick:this.startAuth,iconSize:"23px"}),"facebook"===e&&c.a.createElement(p.FacebookLoginButton,{disabled:a,onClick:this.startAuth,iconSize:"23px"}))}}]),a}(i.Component);a.a=Object(u.b)(null,function(e){return{onLogin:function(a,t){return e(Object(d.h)(a,t))}}})(h)},549:function(e,a,t){"use strict";t.r(a);var n=t(15),r=t(16),l=t(19),o=t(17),s=t(18),i=t(0),c=t.n(i),m=t(95),u=t(129),d=t(13),p=(t(280),t(20)),h=t(23),f=t(31),v=t(29),g=t(281),E=t(96),b=t.n(E),N=t(30),y=t(85),k=t.n(y),w=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(o.a)(a)).call.apply(e,[this].concat(s)))).state={email:"",password:"",name:"",tel:"",isTyping:!1,formErrors:{email:"",password:"",name:""},emailValid:!1,passwordValid:!1,nameValid:!1,formValid:!1},t.handleInputChange=function(e){e.preventDefault();var a=e.target.name,n=e.target.value;t.setState(Object(d.a)({},a,n),function(){t.validateField(a,n)})},t.handleSubmit=function(e){if(e.preventDefault(),t.setState({isTyping:!0}),t.state.formValid){t.props.onRenderLoader();var a={name:t.state.name,email:t.state.email,password:t.state.password,tel:t.state.tel};t.props.onSignUp(a)}},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.onClearError()}},{key:"validateField",value:function(e,a){var t=this.state.formErrors,n=this.state.emailValid,r=this.state.passwordValid,l=this.state.nameValid;switch(e){case"email":n=a.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i),t.email=n?"":" is invalid";break;case"password":r=a.length>=6,t.password=r?"":" is too short";break;case"name":l=a.trim().length>=6,t.name=l?"":" is too short"}this.setState({formErrors:t,emailValid:n,passwordValid:r,nameValid:l},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.emailValid&&this.state.passwordValid&&this.state.nameValid})}},{key:"render",value:function(){var e=this,a=this.state,t=a.isTyping,n=a.emailValid,r=a.passwordValid,l=a.nameValid,o=a.name,s=a.email,i=a.password,m=a.tel,u=this.props,d=u.error,p=u.loader,f=b()(N.a);return c.a.createElement("div",{className:"wrapper fadeInDown"},c.a.createElement("div",{id:"formContent"},c.a.createElement("div",{className:"fadeIn first mt-5"},c.a.createElement("img",{src:k.a,id:"icon",alt:"User Icon"})),c.a.createElement("form",null,d&&d.length?c.a.createElement("div",{className:"alert alert-danger"},d):null,c.a.createElement("input",{type:"text",value:o,onChange:function(a){return e.handleInputChange(a)},id:"nom",className:"fadeIn second",name:"name",placeholder:"Nom"}),t&&!l?c.a.createElement("div",{style:{color:"red"}},"Invalide. Min 6 carat\xe8res"):null,c.a.createElement("input",{type:"email",value:s,onChange:function(a){return e.handleInputChange(a)},id:"email",className:"fadeIn second",name:"email",placeholder:"Adresse Email"}),t&&!n?c.a.createElement("div",{style:{color:"red"}},"Email non valide."):null,c.a.createElement("input",{type:"password",value:i,onChange:function(a){return e.handleInputChange(a)},id:"password",className:"fadeIn third",name:"password",placeholder:"Mot de passe"}),t&&!r?c.a.createElement("div",{style:{color:"red"}},"Invalide. Min 6 carat\xe8res"):null,c.a.createElement("input",{type:"text",value:m,onChange:function(a){return e.handleInputChange(a)},id:"tel",className:"fadeIn second",name:"tel",placeholder:"Num\xe9ro Whatsapp"}),c.a.createElement("button",{disabled:p,type:"submit",onClick:function(a){return e.handleSubmit(a)},id:"signBtn",className:"button fadeIn fourth mt-4 mb-5"},p?c.a.createElement(v.default,{color:"white"}):"S'inscrire")),c.a.createElement("p",null,"Ou bien inscrivez vous avec:"),c.a.createElement("div",{className:"d-flex socialWrapper"},c.a.createElement(g.a,{provider:"google",key:"google",socket:f}),c.a.createElement(g.a,{provider:"facebook",key:"facebook",socket:f})),c.a.createElement("div",{id:"formFooter"},c.a.createElement(h.b,{to:"/auth/login",className:"underlineHover"},"D\xe9ja inscrit ? Connectez vous."))))}}]),a}(i.Component),j=Object(p.b)(function(e){return{loader:e.loader.loading,error:e.auth.error}},function(e){return{onSignUp:function(a){return e(Object(f.g)(a))},onRenderLoader:function(){return e(Object(f.f)())},onClearError:function(){return e(Object(f.b)())}}})(w),O=function(e){function a(){return Object(n.a)(this,a),Object(l.a)(this,Object(o.a)(a).apply(this,arguments))}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return c.a.createElement(u.a,null,this.props.token?this.props.history.goBack():null,c.a.createElement(m.a,null),c.a.createElement(j,null))}}]),a}(i.Component);a.default=Object(p.b)(function(e){return{token:e.auth.token}})(O)},85:function(e,a,t){e.exports=t.p+"static/media/logo.919201fe.png"},90:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){},95:function(e,a,t){"use strict";var n=t(15),r=t(16),l=t(19),o=t(17),s=t(18),i=t(0),c=t.n(i),m=t(23),u=t(86),d=t(20),p=t(31),h=t(87),f=(t(91),t(85)),v=t.n(f),g=t(96),E=t.n(g),b=t(89),N=(t(90),function(e){function a(){return Object(n.a)(this,a),Object(l.a)(this,Object(o.a)(a).apply(this,arguments))}return Object(s.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=Object(b.a)(this.props.recommandations.reverse());return e.reverse(),c.a.createElement("div",{className:"recommandations d-flex flex-column"},e.slice(0,5).map(function(e,a){return c.a.createElement("div",{key:a,className:e.visited?"rec-item":"notvisited rec-item"},c.a.createElement("a",{href:e.link},c.a.createElement("h4",null,e.title),c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"d-flex flex-row align-items-center"},c.a.createElement(u.a,{icon:h.l,size:"1x"}),c.a.createElement("h6",{className:"ml-2 mb-0"},"Par ",e.name)))))}))}}]),a}(i.Component)),y=t(30),k=(t(92),t(9)),w=t.n(k),j=t(29),O=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(o.a)(a)).call.apply(e,[this].concat(s)))).state={searching:!1,results:[],error:""},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidUpdate",value:function(e){var a=this;if(e.query!==this.props.query)if(this.props.query&&this.props.query.trim().length>0){var t=this.props.query;this.setState({searching:!0,results:[]}),w.a.get("/api/event/"+t+"/search").then(function(e){var n=[];e.data.events.forEach(function(e){e.eventType="event",a.state.results.includes(e)||n.push(e)}),w.a.get("/api/service/"+t+"/search").then(function(e){var t=[];e.data.services.forEach(function(e){e.eventType="service",a.state.results.includes(e)||t.push(e)}),a.setState({results:[].concat(n,t),searching:!1})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})})}).catch(function(e){a.setState({error:"Une \xe9rreur s'est produite. Veuillez recharger",searching:!1})})}else this.setState({searching:!1})}},{key:"render",value:function(){return c.a.createElement("div",{className:"searchResult-list ".concat(this.props.className)},this.state.error.length?c.a.createElement("div",{className:"alert alert-danger text-center"},this.state.error):null,this.state.searching?c.a.createElement("div",{className:"d-flex justify-content-center p-3"},c.a.createElement(j.default,null)):this.state.results.length?this.state.results.slice(0,10).map(function(e,a){return c.a.createElement(S,{key:a,result:e})}):c.a.createElement("div",{className:"d-flex justify-content-center p-3"},c.a.createElement("span",null,"Aucun r\xe9sultat")))}}]),a}(i.PureComponent),S=function(e){return c.a.createElement("a",{href:"/annonce/"+e.result.eventType+"/"+e.result._id,className:"d-flex searchResult-item"},c.a.createElement("img",{src:y.a+"/"+e.result.image,alt:"",className:"mr-3"}),c.a.createElement("div",{className:"d-flex flex-column "},c.a.createElement("h3",null,e.result.title),c.a.createElement("span",{className:"text-muted"},e.result.category)))},x=function(e){function a(){var e,t;Object(n.a)(this,a);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(o.a)(a)).call.apply(e,[this].concat(s)))).state={user:null,name:"",token:null,role:"",accountValidated:null,redirect:!1,query:""},t.logout=function(){t.props.onLogout()},t.handleInputChange=function(e){var a=e.target.value;t.setState({query:a})},t}return Object(s.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=JSON.parse(localStorage.getItem("authData"));if(a&&a.user){this.setState({user:a.user,name:a.user.name,token:a.token,role:a.user.role,accountValidated:a.user.accountValidated});var t=E()(y.a);t.on("display notification",function(a){var t=JSON.parse(localStorage.getItem("authData"));t&&t.user&&t.user._id===a.to&&e.props.onAutoSign()}),t.on("display anounce notification",function(a){var t=JSON.parse(localStorage.getItem("authData"));t&&t.user&&e.props.onAutoSign()})}}},{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&this.setState({user:this.props.user,name:this.props.name,token:this.props.token,role:this.props.role,accountValidated:this.props.accountValidated})}},{key:"render",value:function(){var e=this,a=this.state,t=a.name,n=a.token,r=a.role,l=a.accountValidated,o=a.user,s=0;o&&o.recommandations&&o.recommandations.length&&(s=o.recommandations.filter(function(e){return!1===e.visited}).length);return c.a.createElement(i.Fragment,null,c.a.createElement("nav",{className:(this.props.home,"navbar navbar-expand-lg navbar-light bg-light navbar-shadow")},c.a.createElement("div",{className:"container"},c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"search-wrapper"},c.a.createElement("form",{className:"form-inline d-lg-none my-2 my-lg-0 navbar-brand form-mobile"},c.a.createElement("input",{onChange:function(a){return e.handleInputChange(a)},className:"form-control mr-sm-2",type:"text",placeholder:"Rechercher...","aria-label":"Rechercher..."}),c.a.createElement(u.a,{icon:h.j,size:"2x"})),this.state.query.trim().length>0?c.a.createElement(O,{query:this.state.query,className:"d-lg-none"}):null),n?c.a.createElement("div",{className:"dropdown-mobile mt-2"},c.a.createElement("a",{href:"/recommandations",className:"",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},c.a.createElement(u.a,{icon:h.b,size:"1x"}),c.a.createElement("sup",{className:"ml-1"},o.recommandations&&o.recommandations.length?o.recommandations.length:0)),o.recommandations&&o.recommandations.length?c.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},c.a.createElement(N,{recommandations:o.recommandations.reverse()}),c.a.createElement("div",{className:"notifications-link py-2"},c.a.createElement("a",{id:"notifications-link",className:"notifications-link pt-3 text-center",href:"/user/notifications"},"Voir toutes les notifications"))):null):null,c.a.createElement(m.b,{className:"navbar-brand",to:"/"},c.a.createElement("img",{src:v.a,width:"110",height:"100%",alt:"Logo"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03"},c.a.createElement("div",{className:"ml-auto search-wrapper"},c.a.createElement("form",{className:"form-inline d-none d-lg-block my-2 my-lg-0 ml-auto mr-4 form-desktop"},c.a.createElement("input",{onChange:function(a){return e.handleInputChange(a)},className:"form-control mr-sm-2",type:"text",placeholder:"Rechercher...","aria-label":"Rechercher..."}),c.a.createElement(u.a,{icon:h.j,size:"2x"})),this.state.query.trim().length>0?c.a.createElement(O,{query:this.state.query,className:"d-none d-lg-block"}):null),c.a.createElement("ul",{className:"navbar-nav  mt-2 mt-lg-0"},n&&"admin"===r?c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/admin/home"},"Admin Dashboard")):null,n&&"supplier"===r&&l?c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/dashboard/reservations"},"Dashboard")):null,!n||"user"!==r&&"supplier"!==r?null:c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/user/reservations"},"Mes R\xe9servations")),!n||"user"!==r&&"supplier"!==r?null:c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/user/gallery"},"Ma Galerie")),n&&"admin"!==r?c.a.createElement("li",{className:"nav-item rec-item-desktop"},c.a.createElement("div",{className:"dropdown mt-2"},c.a.createElement("a",{href:"/recommandations",className:"",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},c.a.createElement(u.a,{icon:h.b,size:"1x"}),c.a.createElement("sup",{className:"ml-1"},s)),o.recommandations&&o.recommandations.length?c.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},c.a.createElement(N,{recommandations:o.recommandations.reverse()}),c.a.createElement("div",{className:"notifications-link py-2"},c.a.createElement("a",{id:"notifications-link",className:"notifications-link pt-3 text-center",href:"/user/notifications"},"Voir toutes les notifications"))):null)):null,n?null:c.a.createElement(i.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/auth/signup"},c.a.createElement("i",{className:"fa fa-user"}),"Cr\xe9er un compte")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(m.c,{className:"nav-link",to:"/auth/login"},c.a.createElement("i",{className:"fa fa-user"}),"Se connecter")))),n?c.a.createElement("div",{className:"dropdown"},c.a.createElement("p",{className:"dropbtn"},t),c.a.createElement("div",{className:"dropdown-content"},c.a.createElement("a",{className:"nav-link",href:"/user/profile"},c.a.createElement("i",{className:"fa fa-user"}),"Mon profil"),c.a.createElement("a",{href:"/auth/login",onClick:this.logout},c.a.createElement("i",{className:"fa fa-sign-out"}),"Logout"))):null))))}}]),a}(i.PureComponent);a.a=Object(d.b)(function(e){return{userId:e.auth.email,email:e.auth.email,name:e.auth.name,token:e.auth.token,role:e.auth.role,accountValidated:e.auth.accountValidated,user:e.auth.user}},function(e){return{onLogout:function(){return e(Object(p.e)())},onAutoSign:function(){return e(Object(p.a)())}}})(x)}}]);
//# sourceMappingURL=32.91d4eb29.chunk.js.map