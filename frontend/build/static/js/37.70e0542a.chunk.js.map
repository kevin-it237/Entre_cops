{"version":3,"sources":["ui/utils/DateFormat.js","ui/admin/AdminUsers/AdminUsers.js","../node_modules/@babel/runtime/helpers/extends.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js"],"names":["__webpack_require__","d","__webpack_exports__","DateFormat","ForNowDateFormat","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_moment__WEBPACK_IMPORTED_MODULE_1__","react_moment__WEBPACK_IMPORTED_MODULE_1___default","props","a","createElement","format","date","fromNow","AdminUser","state","showModal","users","error","loading","deleting","deleteUser","id","_this","setState","axios","delete","then","res","filter","user","_id","catch","err","_this2","this","get","data","_this3","_this$state","react__WEBPACK_IMPORTED_MODULE_5___default","react__WEBPACK_IMPORTED_MODULE_5__","className","length","style","fontSize","_globalComponent_Loader__WEBPACK_IMPORTED_MODULE_10__","map","key","scope","name","email","_utils_DateFormat__WEBPACK_IMPORTED_MODULE_7__","onClick","react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_6___default","show","size","onHide","Header","closeButton","Title","Body","Footer","react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_8___default","variant","Component","_extends","module","exports","Object","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","excluded","sourceKeys","keys","indexOf"],"mappings":"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","file":"static/js/37.70e0542a.chunk.js","sourcesContent":["import React from 'react';\r\nimport Moment from 'react-moment';\r\nimport 'moment/locale/fr';\r\n\r\nexport const DateFormat = (props) => (\r\n    <Moment format=\"YYYY-MM-DD HH:mm\">{props.date}</Moment>\r\n)\r\n\r\nexport const ForNowDateFormat = props => (\r\n    <Moment fromNow>{props.date}</Moment>\r\n)","import React, { Component, Fragment } from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport {DateFormat} from '../../utils/DateFormat'\r\nimport Button from 'react-bootstrap/Button';\r\nimport axios from 'axios';\r\nimport Loader from '../../globalComponent/Loader';\r\n\r\n\r\nclass AdminUser extends Component {\r\n\r\n    state = {\r\n        showModal: false,\r\n        users: [],\r\n        error: '',\r\n        loading: true,\r\n        deleting: false\r\n    }\r\n\r\n    componentWillMount() {\r\n        try {\r\n            axios.get('/api/user/')\r\n            .then(res => {\r\n                this.setState({ users: res.data.users, loading: false, error: '' })\r\n            })\r\n            .catch(err => {\r\n                this.setState({ error: \"Une érreur s'est produite. Veuillez reéssayer.\", loading: false })\r\n            })\r\n        } catch (error) {\r\n            this.setState({ error: \"Une érreur s'est produite. Veuillez reéssayer.\", loading: false })\r\n        }\r\n    }\r\n\r\n    deleteUser = (id) => {\r\n        this.setState({ deleting: true, error: '' })\r\n        axios.delete('api/user/' + id)\r\n        .then(res => {\r\n            let users = this.state.users.filter(user => {\r\n                return user._id !== id;\r\n            })\r\n            this.setState({\r\n                deleting: false,\r\n                'error': '',\r\n                users: users\r\n            })\r\n            this.setState({ deleting: false, error: '' })\r\n        })\r\n        .catch(err => {\r\n            this.setState({ error: \"Une érreur s'est produite. Veuillez reéssayer.\", deleting: false })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {error, loading, deleting, users} = this.state;\r\n        return (\r\n            <Fragment>\r\n                <div className=\"container\">\r\n                    <div className=\"row mt-5\">\r\n                        <div className=\"col-sm-12\">\r\n                            <h3 className=\"title\">UTILISATEURS</h3>\r\n                        </div>\r\n                        <div className=\"col-sm-12 text-center\">\r\n                            {error && error.length ? <div className=\"alert alert-danger\" style={{ fontSize: \"1.3rem\" }}>{error}</div> : null}\r\n                            {\r\n                                loading ? <Loader />:\r\n                                    users&&users.length ?\r\n                                    <table className=\"table table-bordered\">\r\n                                        <thead className=\"thead-inverse thead-dark\">\r\n                                            <tr>\r\n                                            <th>#</th>\r\n                                            <th>Nom</th>\r\n                                            <th>Email</th>\r\n                                            <th>Création</th>\r\n                                            <th>Actions</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                        {\r\n                                            users.map((user, id) => (\r\n                                                <tr key={id}>\r\n                                                    <th scope=\"row\">{id+1}</th>\r\n                                                    <td>{user.name}</td>\r\n                                                    <td>{user.email}</td>\r\n                                                    <td className=\"date\"><DateFormat date={user.date} /></td>\r\n                                                    <td className=\"actions\">\r\n                                                        <button onClick={() => this.deleteUser(user._id)} className=\"btn btn-danger btn-md ml-3\">{deleting ? <Loader />:\"Supprimer\"}</button>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))\r\n                                        }\r\n                                        </tbody>\r\n                                    </table>:null\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                 {/* Add a new Supplier Popup */}\r\n                 <Modal show={this.state.showModal} size=\"lg\" onHide={() => this.setState({showModal: !this.state.showModal})} >\r\n                    <Modal.Header closeButton>\r\n                    <Modal.Title>Détails</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <div className=\"container\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-sm-12 pl-4 pr-4 mt-4 mb-3\">\r\n                                    \r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <div className=\"py-3\">\r\n                            <Button variant=\"danger\" onClick={() => this.setState({showModal: !this.state.showModal})}>\r\n                                Fermer\r\n                            </Button>\r\n                        </div>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminUser;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;"],"sourceRoot":""}