(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{106:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return c});var l=a(0),n=a.n(l),r=a(122),i=a.n(r),o=(a(123),function(e){return n.a.createElement(i.a,{format:"YYYY-MM-DD HH:mm"},e.date)}),c=function(e){return n.a.createElement(i.a,{fromNow:!0},e.date)}},108:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var l=a(15),n=a(16),r=a(19),i=a(17),o=a(18),c=a(0),s=a.n(c),m=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={url:""},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"preview",value:function(e){this.setState({url:URL.createObjectURL(e.target.files[0])}),this.props.setFile(this.props.name,e.target.files[0])}},{key:"render",value:function(){var e=this,t=this.state.url,a=this.props,l=a.label,n=a.oldUrl,r=a.type,i=a.isEditing,o="image"===r?"image/png,image/jpeg,image/jpg":"document"===r?".docx, .pptx, .pdf":"video/*";return s.a.createElement(c.Fragment,null,s.a.createElement("button",{disabled:i,type:"button",className:"btn btn-dark mb-2",onClick:function(){return e.inputElement.click()}},l," "),s.a.createElement("input",{style:{visibility:"hidden"},accept:o,onChange:function(t){return e.preview(t)},ref:function(t){return e.inputElement=t},type:"file"}),s.a.createElement("div",{className:"ibox"},s.a.createElement("div",{className:"ibox-content product-box active"},s.a.createElement("div",{className:t||n?"":"product-imitation"},"",(t||n)&&"image"===r?s.a.createElement("img",{src:t||n,accept:o,alt:"",style:{width:"100%"}}):"",(t||n)&&"document"===r?s.a.createElement("iframe",{src:t||n||"",projectName:"Funnel PDF",align:"top",width:"100%",frameBorder:"0",title:"Doc",target:"Message"},s.a.createElement("p",null,"Your browser doesn't support Iframe. Here is a ",s.a.createElement("a",{href:t||n},"link to the document")," instead.")," "):"",(t||n)&&"video"===r?s.a.createElement("video",{src:t||n||"",width:"100%",controls:!0},s.a.createElement("p",null,"Your browser doesn't support HTML5 video. Here is a ",s.a.createElement("a",{href:t||n},"link to the video")," instead.")," "):""))))}}]),t}(c.Component)},201:function(e,t,a){"use strict";var l=a(13),n=a(15),r=a(16),i=a(19),o=a(17),c=a(18),s=a(0),m=a.n(s),u=a(9),d=a.n(u),p=(a(202),a(11)),f=a(108),h=a(29),E=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",email:"",tel:"",location:"",services:[],profileImage:"",otherInfos:"",mapLink:"",isTyping:!1,formValid:!1,emailValid:!1,nameValid:!1,telValid:!1,locationValid:!1,servicesValid:!1,profileImageValid:!1,otherInfosValid:!1,loading:!1,redirect:!1,error:""},a.handleInputChange=function(e){var t;e.preventDefault();var n=e.target.name,r=e.target.value;a.setState((t={},Object(l.a)(t,n,r),Object(l.a)(t,"error",""),t),function(){a.validateField(n,r)})},a.validateField=function(e,t){var l=a.state,n=l.emailValid,r=l.nameValid,i=l.telValid,o=l.locationValid,c=l.servicesValid,s=l.profileImageValid,m=l.otherInfosValid;switch(e){case"email":n=t.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i);break;case"name":r=t.length>0;break;case"tel":i=t.length>0;break;case"location":o=t.length>0;break;case"services":c=t.length>0;break;case"profileImage":s=t.length>0;break;case"otherInfos":m=t.length>0}a.setState({emailValid:n,nameValid:r,telValid:i,locationValid:o,servicesValid:c,profileImageValid:s,otherInfosValid:m},a.validateForm)},a.validateForm=function(){a.setState({formValid:a.state.emailValid&&4===a.state.emailValid.length&&a.state.nameValid&&a.state.telValid&&a.state.locationValid&&a.state.servicesValid&&a.state.profileImageValid&&a.state.otherInfosValid})},a.handleSubmit=function(e){if(e.preventDefault(),a.state.formValid){var t=new FormData,l=a.state,n=l.email,r=l.name,i=l.tel,o=l.location,c=l.services,s=l.profileImage,m=l.otherInfos,u=l.mapLink;t.append("name",r),t.append("email",n),t.append("tel",i),t.append("location",o),t.append("services",c),t.append("profileImage",s),t.append("otherInfos",m),t.append("mapLink",u);a.setState({loading:!0});try{d.a.post("/api/supplier/new",t,{headers:{"content-type":"multipart/form-data"}}).then(function(e){a.setState({loading:!1,redirect:!0}),a.props.closeModal&&a.props.closeModal()}).catch(function(e){"EMAIL_EXIST"===e.response.data.message?a.setState({error:"Adresse Email d\xe9ja utilis\xe9e",loading:!1}):a.setState({error:"Erreur de connexion. Veuillez re\xe9ssayer",loading:!1})})}catch(p){a.setState({error:"Erreur de connexion. Veuillez re\xe9ssayer",loading:!1})}}else a.setState({error:"Veuillez remplir tous les champs",isTyping:!0})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"setFile",value:function(e,t){var a;this.setState((a={},Object(l.a)(a,e,t),Object(l.a)(a,"profileImageValid",!0),Object(l.a)(a,"error",""),a),this.validateForm)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isTyping,l=t.name,n=t.tel,r=t.services,i=t.location,o=t.locationValid,c=t.otherInfos,u=t.emailValid,d=t.telValid,E=t.email,v=t.nameValid,g=t.profileImage,b=t.servicesValid,N=t.otherInfosValid,y=t.profileImageValid,S=t.error,w=t.loading,V=t.mapLink;return m.a.createElement(s.Fragment,null,this.state.redirect&&this.props.closeTo?m.a.createElement(p.a,{to:this.props.closeTo}):null,m.a.createElement("form",null,S&&S.length?m.a.createElement("div",{className:"alert alert-danger",style:{fontSize:"1.3rem"}},S):null,m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Nom complet"),m.a.createElement("input",{type:"text",className:a&&!v?"form-control is-invalid":"form-control",value:l,onChange:function(t){return e.handleInputChange(t)},name:"name",id:"name",placeholder:"Nom complet"}),a&&!v?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"email"},"Adresse Email"),m.a.createElement("input",{type:"email",className:a&&!u?"form-control is-invalid":"form-control",value:E,onChange:function(t){return e.handleInputChange(t)},name:"email",id:"email",placeholder:"Adresse Email"}),a&&!u?m.a.createElement("div",{className:"invalid-feedback"},"Email invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"tel"},"Numero de T\xe9l\xe9phone"),m.a.createElement("input",{type:"tel",className:a&&!d?"form-control is-invalid":"form-control",value:n,onChange:function(t){return e.handleInputChange(t)},name:"tel",id:"tel",pattern:"[0-9]{9}",placeholder:"Numero de T\xe9l\xe9phone"}),a&&!d?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Localisation"),m.a.createElement("input",{type:"text",className:a&&!o?"form-control is-invalid":"form-control",value:i,onChange:function(t){return e.handleInputChange(t)},name:"location",id:"location",placeholder:"Localisation"}),a&&!o?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Lien Google Map"),m.a.createElement("input",{type:"text",className:"form-control",value:V,onChange:function(t){return e.handleInputChange(t)},name:"mapLink",id:"mapLink",placeholder:"Lien Google Map"})),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},'Vos services (S\xe9parez par des virgules: ",")'),m.a.createElement("textarea",{type:"text",className:a&&!b?"form-control is-invalid":"form-control",value:r,onChange:function(t){return e.handleInputChange(t)},name:"services",rows:3,placeholder:"Services"}),a&&!b?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{for:"name"},"Autres informations"),m.a.createElement("textarea",{type:"text",className:a&&!N?"form-control is-invalid":"form-control",value:c,onChange:function(t){return e.handleInputChange(t)},name:"otherInfos",rows:3,placeholder:"Autres informations"}),a&&!N?m.a.createElement("div",{className:"invalid-feedback"},"Invalide"):null),m.a.createElement("div",{className:"row align-items-center justify-content-center py-3"},m.a.createElement("div",{className:"col-sm-8 col-md-8 col-lg-6 d-flex flex-column justify-content-center align-items-center"},m.a.createElement(f.a,{type:"image",oldUrl:g,setFile:function(t,a){return e.setFile(t,a)},name:"profileImage",label:"Image de Profil"}),a&&!y?m.a.createElement("p",{className:"alert alert-danger"},"Image Requise"):null)),m.a.createElement("div",{className:"d-flex justify-content-end"},m.a.createElement("button",{disabled:w,type:"submit",onClick:function(t){return e.handleSubmit(t)},className:"button fourth mt-4 mb-5"},w?m.a.createElement(h.default,{color:"white"}):"Valider"))))}}]),t}(s.Component);t.a=E},202:function(e,t,a){},509:function(e,t,a){"use strict";a.r(t);var l=a(13),n=a(15),r=a(16),i=a(19),o=a(17),c=a(18),s=a(0),m=a.n(s),u=a(98),d=a.n(u),p=a(9),f=a.n(p),h=a(106),E=a(107),v=a.n(E),g=a(29),b=a(201),N=a(30);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}var S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={showModal:!1,suppliers:[],loading:!0,supplier:null,validating:!1,deleting:!1,loadinSingle:!1,error:"",fetcherror:"",showSupplierCreationModal:!1},a.closeSupplierModal=function(){a.setState({showSupplierCreationModal:!1})},a.getSingleSupplier=function(e){a.setState({loadinSingle:!0,showModal:!0}),f.a.get("/api/supplier/"+e).then(function(e){a.setState({loadinSingle:!1,supplier:e.data.supplier,error:""})}).catch(function(e){a.setState({loadinSingle:!1,error:"Erreur survenue, veuillez actualiser"})})},a.validateSupplier=function(e){a.setState({validating:!0,supplier:e}),f.a.patch("/api/supplier/validate/"+e._id).then(function(t){var n=a.state.suppliers.map(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach(function(t){Object(l.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e);return e._id===a.state.supplier._id&&(t.accountValidated=!0),t});a.setState({suppliers:n,validating:!1,showModal:!1,error:""});f.a.post("/api/email/sendmail/"+e.email+"/Validation de votre compte fournisseur/"+e.name+"/"+e._id+"/validatesupplier")}).catch(function(e){a.setState({validating:!1,error:"Erreur survenue, veuillez actualiser"})})},a.deleteSupplier=function(e){a.setState({deleting:!0,supplier:e}),f.a.delete("/api/user/"+e._id).then(function(e){var t=a.state.suppliers.filter(function(e){return JSON.stringify(e)!==JSON.stringify(a.state.supplier)});a.setState({deleting:!1,showModal:!1,suppliers:t})}).catch(function(e){a.setState({deleting:!1,error:e})})},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.get("/api/supplier/all").then(function(t){e.setState({loading:!1,suppliers:t.data.suppliers.reverse(),fetcherror:""})}).catch(function(t){e.setState({loading:!1,fetcherror:"Erreur survenue, veuillez actualiser"})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,l=t.suppliers,n=t.supplier,r=t.validating,i=t.deleting,o=t.error,c=t.fetcherror,u=t.loadinSingle;return m.a.createElement(s.Fragment,null,m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row mt-5"},m.a.createElement("div",{className:"col-sm-12 d-flex justify-content-between align-items-center mb-5"},m.a.createElement("h3",{className:"title"},"FOURNISSEURS"),m.a.createElement("button",{onClick:function(){return e.setState({showSupplierCreationModal:!0})},className:"button"},"Ajouter un Fournisseur")),m.a.createElement("div",{className:"col-sm-12"},c&&c.length?m.a.createElement("div",{className:"alert alert-danger"},c):null,a?m.a.createElement("div",{className:"p-4 text-center"},m.a.createElement(g.default,null)):l&&l.length?m.a.createElement("table",{className:"table table-bordered"},m.a.createElement("thead",{className:"thead-inverse thead-dark"},m.a.createElement("tr",null,m.a.createElement("th",null,"#"),m.a.createElement("th",null,"Nom"),m.a.createElement("th",null,"Email"),m.a.createElement("th",null,"Tel"),m.a.createElement("th",null,"Cr\xe9ation"),m.a.createElement("th",null,"Etat"),m.a.createElement("th",null,"Actions"))),m.a.createElement("tbody",null,l.map(function(t,a){return m.a.createElement("tr",{key:t._id},m.a.createElement("th",{scope:"row"},a+1),m.a.createElement("td",null,t.name),m.a.createElement("td",null,t.email),m.a.createElement("td",null,t.tel),m.a.createElement("td",{className:"date"},m.a.createElement(h.a,{date:t.date})),m.a.createElement("td",{className:"date"},t.accountValidated?m.a.createElement("span",{style:{color:"green"}},"Compte Valid\xe9"):m.a.createElement("b",{style:{color:"#DC3545"}},"En attente")),m.a.createElement("td",{className:"actions"},m.a.createElement("button",{className:"btn btn-outline-dark btn-md ml-3",onClick:function(){return e.getSingleSupplier(t._id)}},"Afficher")))}))):null))),m.a.createElement(d.a,{show:this.state.showModal,size:"lg",onHide:function(){return e.setState({showModal:!1})}},m.a.createElement(d.a.Header,{closeButton:!0},m.a.createElement(d.a.Title,null,"D\xe9tails sur le Fournisseur")),m.a.createElement(d.a.Body,null,m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-12 pl-4 pr-4 mt-4 mb-3"},o&&o.length?m.a.createElement("div",{className:"alert alert-danger"},o):null,u?m.a.createElement("div",{className:"text-center"},m.a.createElement(g.default,null)):n?m.a.createElement("table",{className:"table table-bordered"},m.a.createElement("tbody",{className:"thead-inverse"},m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Nom"))),m.a.createElement("th",null,m.a.createElement("h4",null,n.name))),m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Email"))),m.a.createElement("th",null,m.a.createElement("h4",null,n.email))),m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Tel"))),m.a.createElement("th",null,m.a.createElement("h4",null,n.tel))),m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Localisation"))),m.a.createElement("th",null,m.a.createElement("h4",null,n.location))),m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Lien google Map"))),m.a.createElement("th",null,m.a.createElement("h4",null,n.mapLink?n.mapLink:null))),m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Services"))),m.a.createElement("th",null,m.a.createElement("h4",null,n.services))),m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Autres Infos"))),m.a.createElement("th",null,m.a.createElement("h4",null,n.otherInfos))),m.a.createElement("tr",null,m.a.createElement("th",null,m.a.createElement("h4",null,m.a.createElement("strong",null,"Profile"))),m.a.createElement("th",null,m.a.createElement("img",{src:N.a+"/"+n.profileImage,alt:"",width:"250",height:"250",className:"img-fluid"}))))):null)))),m.a.createElement(d.a.Footer,null,m.a.createElement("div",{className:"py-3"},n&&!n.accountValidated?m.a.createElement(v.a,{variant:"dark",className:"mr-3",onClick:function(){return e.validateSupplier(n)}},r?m.a.createElement(g.default,{color:"white"}):"Valider ce compte"):null,m.a.createElement(v.a,{variant:"danger",className:"mr-3",onClick:function(){return e.deleteSupplier(n)}},i?m.a.createElement(g.default,{color:"white"}):"Supprimer"),m.a.createElement(v.a,{variant:"default",onClick:function(){return e.setState({showModal:!1,error:""})}},"Fermer")))),m.a.createElement(d.a,{show:this.state.showSupplierCreationModal,size:"lg",onHide:function(){return e.setState({showSupplierCreationModal:!1})}},m.a.createElement(d.a.Header,{closeButton:!0},m.a.createElement(d.a.Title,null,"Nouveau Fournisseur")),m.a.createElement(d.a.Body,null,m.a.createElement("div",{className:"container supplier-form"},m.a.createElement(b.a,{closeModal:this.closeSupplierModal}))),m.a.createElement(d.a.Footer,null,m.a.createElement("div",{className:"py-3"},m.a.createElement(v.a,{variant:"outline",onClick:function(){return e.setState({showSupplierCreationModal:!1})}},"Fermer")))))}}]),t}(s.Component);t.default=S},81:function(e,t){function a(){return e.exports=a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},a.apply(this,arguments)}e.exports=a},83:function(e,t){e.exports=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}}}]);
//# sourceMappingURL=35.5e5e9c81.chunk.js.map